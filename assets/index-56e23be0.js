import{d as L,as as T,at as B,au as d,av as h,aw as t,ax as j,F as M,ay as G,az as o,c as g,aA as k,aB as ie,aC as De,aD as le,aE as Q,aF as r,aG as e,aH as H,aI as Ie,aJ as Me,aK as Se,r as w,n as R,aL as A,ao as Re,o as te,aM as Ue,z as He,aN as Ee,aO as Ae,aP as Be,aQ as Fe,aR as ze,aS as ge}from"./vendor-c5f40ea8.js";import{_ as qe,a as Oe,b as ve,c as U,d as Ne,e as ae,f as Te,g as Ve,h as Ge,i as Ze,j as Qe,N as Ye,k as _e,l as ne,m as de,n as Y,o as O,p as ye,u as z,q as J,r as xe,s as $e,t as K,v as Je,w as ue,x as Ke,y as We,z as Xe,A as et,B as be,C as pe,D as je,E as tt,F as ke,G as nt,H as ot,I as st,J as at,K as ct,L as lt,M as rt,O as it,P as _t,Q as dt}from"./naive-d2ded0ff.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))c(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const _ of s.addedNodes)_.tagName==="LINK"&&_.rel==="modulepreload"&&c(_)}).observe(document,{childList:!0,subtree:!0});function l(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerpolicy&&(s.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?s.credentials="include":a.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function c(a){if(a.ep)return;a.ep=!0;const s=l(a);fetch(a.href,s)}})();const ut=L({__name:"BreadCrumb",setup(i){const n=T();return(l,c)=>{const a=B("RouterLink"),s=qe,_=Oe;return d(),h(_,{separator:">",class:"p-5 pb-0"},{default:t(()=>[(d(!0),j(M,null,G(o(n).meta.breadCrumb,m=>(d(),h(s,null,{default:t(()=>[m.to?(d(),h(a,{key:0,to:m.to},{default:t(()=>[g(k(m.text),1)]),_:2},1032,["to"])):(d(),j(M,{key:1},[g(k(m.text),1)],64))]),_:2},1024))),256))]),_:1})}}}),re="/assets/Logo-891bf623.png";ie.defaults.headers.post["Content-Type"]="text/plain";ie.defaults.headers.get["Content-Type"]="text/plain";const pt=async(i,n,l,c)=>{if(c!==void 0)var{params:a={},data:s={}}=c;else a=s=null;const _={url:i,method:n,params:a,data:s,baseURL:l,timeout:0,...c};return ie(_).then(m=>m).catch(m=>{throw m})},E=(i,n)=>pt("https://script.google.com/macros/s/AKfycbx-4PWLRWjEFlA59clMhdoe0TU_ls77292_7UIZpvTOLznRjVul1wqvXO4fsxd1jTl8/exec",i,"",{...n}),S=De("user",{state:()=>({credential:localStorage.getItem("credential"),googleData:null,discordData:null,userData:null,createdProjects:null,joinedProjects:null,paid:0,appReady:!1,isCore:!1,isFullYear:!1,isLastSemester:!1}),getters:{getAvatar(i){var n;return(n=i.googleData)==null?void 0:n.picture},getId(i){var n;return(n=i.googleData)==null?void 0:n.sub},getEmail(i){var n;return(n=i.googleData)==null?void 0:n.email},isGoogleReady(i){return i.googleData!==null},isAppReady(i){return i.appReady},isUserCompleted(i){var n,l;return((n=i.userData)==null?void 0:n.name)!==""&&((l=i.userData)==null?void 0:l.phone)!==""},isDiscordConnected(i){return i.discordData!==null}},actions:{async googleLogin(i){if(i){const n=le(i);if(n.exp*1e3<new Date().getTime())this.googleLogout();else{localStorage.setItem("credential",i),this.googleData=n,this.credential=i;const l=await E("post",{data:{type:"google",uid:n.sub,email:n.email}}),{data:c,success:a}=l.data;if(!a)throw new Error(c);this.userData=c.user,this.discordData=c.discord,this.createdProjects=c.createdProjects,this.joinedProjects=c.joinedProjects,this.paid=c.paidCount}}else if(this.credential){const n=le(this.credential);if(n.exp*1e3<new Date().getTime())this.googleLogout();else{this.googleData=n;const l=await E("get",{params:{uid:n.sub}}),{data:c,success:a}=l.data;if(!a)throw new Error(c);this.userData=c.user,this.discordData=c.discord,this.createdProjects=c.createdProjects,this.joinedProjects=c.joinedProjects,this.paid=c.paidCount,this.isCore=c.isCore,this.isLastSemester=c.isLastSemester,this.isFullYear=c.isFullYear}}else this.googleData={};this.appReady=!0},async discordLogin(i){const n=await E("post",{data:{type:"discord",uid:this.getId,code:i}}),{data:l,success:c}=n.data;if(!c)throw new Error(l);this.discordData=l},async discordReset(i){const n=await E("post",{data:{uid:this.getId,type:"discord",code:i,reset:!0}}),{data:l,success:c}=n.data;if(!c)throw new Error(l);this.discordData=null},async userUpdate(i){const n=await E("post",{data:{uid:this.getId,type:"user",name:i.name,phone:i.phone,inSchool:i.inSchool,dept:i.inSchool?i.dept:null,studentId:i.inSchool?i.studentId:null}}),{data:l,success:c}=n.data;if(!c)throw new Error(l);this.userData=l},async joinProject(i,n){const l=await E("post",{data:{uid:this.getId,type:"joinProject",id:i,authCode:n}}),{data:c,success:a}=l.data;if(!a)throw new Error(c);this.joinedProjects=c},async createProject(i,n,l){const c=await E("post",{data:{uid:this.getId,type:"createProject",name:i,description:n,link:l}}),{data:a,success:s}=c.data;if(!s)throw new Error(a);this.createdProjects=[...this.createdProjects,a]},async editProject(i,n,l,c,a,s){const _=await E("post",{data:{uid:this.getId,type:"editProject",name:i,description:n,id:c,link:l,mentorType:a,mentorName:s}}),{data:m,success:f}=_.data;if(!f)throw new Error(m);this.createdProjects=this.createdProjects.map(u=>u.id===m.id?{...u,...m}:u)},googleLogout(){localStorage.removeItem("credential"),this.credential=null,this.googleData={},this.discordData=null,this.userData=null}}}),mt={class:"flex w-full items-center justify-between"},ft=r("h2",{class:"text-xl"},"GDSC Member",-1),ht={key:0,class:"flex items-center gap-2"},gt=L({__name:"PageHeader",setup(i){const n=S(),l=Q(),c=()=>{n.googleLogout(),l.push({name:"Login"})};return(a,s)=>{const _=ve,m=B("RouterLink"),f=U,u=Ne;return d(),h(u,{class:"h-18 p-5",bordered:""},{default:t(()=>[r("div",mt,[e(m,{to:{name:"Home"},tag:"div",class:"flex items-center gap-2"},{default:t(()=>[e(_,{src:o(re),color:"."},null,8,["src"]),ft]),_:1}),o(n).credential?(d(),j("div",ht,[e(f,{size:"medium",onClick:c},{default:t(()=>[g("登出")]),_:1}),e(_,{round:"",src:o(n).getAvatar,"fallback-src":o(re)},null,8,["src","fallback-src"])])):H("",!0)])]),_:1})}}}),vt=L({__name:"Index",async setup(i){let n,l;const c=S(),a=T();return a.name!=="Login"&&([n,l]=Ie(()=>c.googleLogin()),await n,l()),(s,_)=>{const m=gt,f=ut,u=B("RouterView"),v=ae;return d(),h(v,{show:!o(c).isAppReady,class:"h-full"},{default:t(()=>[o(a).name!=="Login"?(d(),h(m,{key:0})):H("",!0),o(c).isAppReady&&o(a).name!=="Login"?(d(),h(f,{key:1})):H("",!0),r("div",{class:Me(["p-5",{"h-full":o(a).name==="Login"}])},[e(u)],2)]),_:1},8,["show"])}}});const yt=L({__name:"App",setup(i){return(n,l)=>{const c=ae,a=Ge,s=Ze,_=Qe,m=Ve;return d(),h(m,{theme:o(Te),class:"h-full w-full"},{default:t(()=>[e(s,null,{default:t(()=>[e(a,null,{default:t(()=>[(d(),h(Se,null,{fallback:t(()=>[e(c,{loading:"",class:"h-full w-full"})]),default:t(()=>[e(vt)]),_:1}))]),_:1})]),_:1}),e(_)]),_:1},8,["theme"])}}}),xt={name:"MdiQrcode"},N=(i,n)=>{const l=i.__vccOpts||i;for(const[c,a]of n)l[c]=a;return l},$t={width:"1em",height:"1em",viewBox:"0 0 24 24"},bt=r("path",{fill:"currentColor",d:"M3 11h2v2H3v-2m8-6h2v4h-2V5m-2 6h4v4h-2v-2H9v-2m6 0h2v2h2v-2h2v2h-2v2h2v4h-2v2h-2v-2h-4v2h-2v-4h4v-2h2v-2h-2v-2m4 8v-4h-2v4h2M15 3h6v6h-6V3m2 2v2h2V5h-2M3 3h6v6H3V3m2 2v2h2V5H5M3 15h6v6H3v-6m2 2v2h2v-2H5Z"},null,-1),jt=[bt];function kt(i,n,l,c,a,s){return d(),j("svg",$t,jt)}const wt=N(xt,[["render",kt]]),q={社員:700,會員:500},Ct={class:"flex items-center justify-between"},Lt=r("h2",null,"收據",-1),Pt={class:"grid grid-cols-3"},Dt=L({__name:"Receipt",setup(i){const n=S(),l=w(!1),c=R(()=>n.joinedProjects.length>0||n.createdProjects.length>0?{type:"社員",count:q.社員+(n.isLastSemester?-200:0)}:n.paid>=q.會員?{type:"會員",count:q.會員+(n.isLastSemester?-200:0)}:{type:"Insider",count:0}),a=R(()=>`https://member.andyjjrt.cc/payment?id=${n.getId}`);return(s,_)=>{const m=wt,f=Ye,u=U,v=_e,b=ne,p=de,y=Y,x=B("vue-qrcode"),$=O,P=ye;return d(),j(M,null,[e(y,null,{header:t(()=>[r("div",Ct,[Lt,e(u,{text:"",onClick:_[0]||(_[0]=C=>l.value=!0),"icon-placement":"right"},{icon:t(()=>[e(f,{class:"text-xl"},{default:t(()=>[e(m)]),_:1})]),default:t(()=>[g(" 繳費 ")]),_:1})])]),default:t(()=>[r("div",Pt,[e(v,{label:"當前身分"},{default:t(()=>[g(k(o(c).type),1)]),_:1}),e(v,{label:"應繳金額"},{default:t(()=>[g(k(o(c).count),1)]),_:1}),e(v,{label:"已繳金額"},{default:t(()=>[g(k(o(n).paid),1)]),_:1})]),o(n).isCore?(d(),j(M,{key:1},[o(c).count<o(n).paid?(d(),j(M,{key:0},[e(b),e(p,{title:"您繳的社費大於應繳金額，請找幹部領取退款",type:"info"})],64)):o(c).count>o(n).paid?(d(),j(M,{key:1},[e(b),e(p,{title:"您的社費尚未繳齊，請找幹部補繳",type:"error"})],64)):(d(),j(M,{key:2},[],64)),o(n).isFullYear?H("",!0):(d(),j(M,{key:3},[e(b),e(p,{title:"上學期已繳交社費",type:"success"})],64))],64)):(d(),j(M,{key:0},[e(b),e(p,{title:"你是core",type:"success"})],64))]),_:1}),e(P,{show:o(l),"onUpdate:show":_[1]||(_[1]=C=>A(l)?l.value=C:null),"transform-origin":"center"},{default:t(()=>[e(y,{class:"max-w-xs rounded-2xl",title:"繳費",bordered:!1,role:"dialog","aria-modal":"true"},{default:t(()=>[e($,{vertical:""},{default:t(()=>[e($,{justify:"center"},{default:t(()=>[e(x,{value:o(a)},null,8,["value"])]),_:1}),e(b),e(p,{title:"請出示此QRcode給幹部",type:"info"})]),_:1})]),_:1})]),_:1},8,["show"])],64)}}}),It={name:"Fa6SolidUserPlus"},Mt={width:"1.25em",height:"1em",viewBox:"0 0 640 512"},St=r("path",{fill:"currentColor",d:"M352 128c0 70.7-57.3 128-128 128S96 198.7 96 128S153.3 0 224 0s128 57.3 128 128zM0 482.3C0 383.8 79.8 304 178.3 304h91.4c98.5 0 178.3 79.8 178.3 178.3c0 16.4-13.3 29.7-29.7 29.7H29.7C13.3 512 0 498.7 0 482.3zM504 312v-64h-64c-13.3 0-24-10.7-24-24s10.7-24 24-24h64v-64c0-13.3 10.7-24 24-24s24 10.7 24 24v64h64c13.3 0 24 10.7 24 24s-10.7 24-24 24h-64v64c0 13.3-10.7 24-24 24s-24-10.7-24-24z"},null,-1),Rt=[St];function Ut(i,n,l,c,a,s){return d(),j("svg",Mt,Rt)}const Ht=N(It,[["render",Ut]]),Et={name:"Fa6SolidUser"},At={width:"0.88em",height:"1em",viewBox:"0 0 448 512"},Bt=r("path",{fill:"currentColor",d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0S96 57.3 96 128s57.3 128 128 128zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512h388.6c16.4 0 29.7-13.3 29.7-29.7c0-98.5-79.8-178.3-178.3-178.3h-91.4z"},null,-1),Ft=[Bt];function zt(i,n,l,c,a,s){return d(),j("svg",At,Ft)}const qt=N(Et,[["render",zt]]),Ot={name:"MdiCheckCircle"},Nt={width:"1em",height:"1em",viewBox:"0 0 24 24"},Tt=r("path",{fill:"currentColor",d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10s10-4.5 10-10S17.5 2 12 2m-2 15l-5-5l1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9Z"},null,-1),Vt=[Tt];function Gt(i,n,l,c,a,s){return d(),j("svg",Nt,Vt)}const we=N(Ot,[["render",Gt]]),Zt={name:"LogosDiscordIcon"},Qt={width:"1.29em",height:"1em",viewBox:"0 0 256 199"},Yt=r("path",{fill:"#5865F2",d:"M216.856 16.597A208.502 208.502 0 0 0 164.042 0c-2.275 4.113-4.933 9.645-6.766 14.046c-19.692-2.961-39.203-2.961-58.533 0c-1.832-4.4-4.55-9.933-6.846-14.046a207.809 207.809 0 0 0-52.855 16.638C5.618 67.147-3.443 116.4 1.087 164.956c22.169 16.555 43.653 26.612 64.775 33.193A161.094 161.094 0 0 0 79.735 175.3a136.413 136.413 0 0 1-21.846-10.632a108.636 108.636 0 0 0 5.356-4.237c42.122 19.702 87.89 19.702 129.51 0a131.66 131.66 0 0 0 5.355 4.237a136.07 136.07 0 0 1-21.886 10.653c4.006 8.02 8.638 15.67 13.873 22.848c21.142-6.58 42.646-16.637 64.815-33.213c5.316-56.288-9.08-105.09-38.056-148.36ZM85.474 135.095c-12.645 0-23.015-11.805-23.015-26.18s10.149-26.2 23.015-26.2c12.867 0 23.236 11.804 23.015 26.2c.02 14.375-10.148 26.18-23.015 26.18Zm85.051 0c-12.645 0-23.014-11.805-23.014-26.18s10.148-26.2 23.014-26.2c12.867 0 23.236 11.804 23.015 26.2c0 14.375-10.148 26.18-23.015 26.18Z"},null,-1),Jt=[Yt];function Kt(i,n,l,c,a,s){return d(),j("svg",Qt,Jt)}const Ce=N(Zt,[["render",Kt]]),Wt=r("div",{class:"flex justify-between"},[r("div",{class:"flex gap-2 items-center"},[r("h2",null,"體驗社課登記 (維護中)")])],-1),Xt={class:"flex justify-between"},en={class:"flex gap-2 items-center"},tn=r("h2",null,"Discord綁定",-1),nn={class:"flex items-center text-green-600 text-2xl"},on={class:"flex justify-between"},sn={class:"flex gap-2 items-center"},an=r("h2",null,"個人資料",-1),cn={class:"flex items-center text-green-600 text-2xl"},ln={class:"flex justify-between"},rn={class:"flex gap-2 items-center"},_n=r("h2",null,"我的專案",-1),dn=L({__name:"Index",setup(i){const n=S();return(l,c)=>{const a=Y,s=ne,_=Ce,m=we,f=B("RouterLink"),u=qt,v=Ht,b=Dt,p=O;return d(),h(p,{vertical:""},{default:t(()=>[e(a,{disabled:""},{header:t(()=>[Wt]),_:1}),e(s),e(f,{to:"/link-discord"},{default:t(()=>[e(a,null,{header:t(()=>[r("div",Xt,[r("div",en,[e(_),tn]),r("span",nn,[o(n).isDiscordConnected?(d(),h(m,{key:0})):H("",!0)])])]),_:1})]),_:1}),e(f,{to:"/user"},{default:t(()=>[e(a,null,{header:t(()=>[r("div",on,[r("div",sn,[e(u),an]),r("span",cn,[o(n).isUserCompleted?(d(),h(m,{key:0})):H("",!0)])])]),_:1})]),_:1}),e(f,{to:"/projects"},{default:t(()=>[e(a,null,{header:t(()=>[r("div",ln,[r("div",rn,[e(v),_n])])]),_:1})]),_:1}),e(s),e(b)]),_:1})}}}),un=["href"],pn=L({__name:"LoginButton",setup(i){const n=R(()=>"https://discord.com/api/oauth2/authorize?client_id=1069510883719520266&redirect_uri=https%3A%2F%2Fmember.andyjjrt.cc%2Fauth%2Fcallback%2Fdiscord&response_type=code&scope=identify%20email");return(l,c)=>{const a=Ce,s=U;return d(),j("a",{href:o(n)},[e(s,null,{icon:t(()=>[e(a)]),default:t(()=>[g(" 綁定Discord ")]),_:1})],8,un)}}}),mn={class:"flex justify-between items-center mt-[-10px]"},fn={class:"relative pb-12"},hn=["src"],gn=["src"],Le=L({__name:"Profile",props:{discordData:{type:Object,default:()=>{}},readOnly:{type:Boolean,default:!1}},setup(i){const n=i,l=S(),c=w(!1),a=async()=>{var f;c.value=!0,await l.discordReset((f=n.discordData)==null?void 0:f.id),c.value=!1},s=R(()=>{var f,u;return n.discordData.banner?`https://cdn.discordapp.com/banners/${(f=n.discordData)==null?void 0:f.id}/${(u=n.discordData)==null?void 0:u.banner}?size=512`:n.discordData.banner_color?`https://singlecolorimage.com/get/${n.discordData.banner_color.split("#")[1]}/512x175`:"https://singlecolorimage.com/get/ffffff/512x175"}),_=R(()=>{var f,u;return n.discordData.avatar?`https://cdn.discordapp.com/avatars/${(f=n.discordData)==null?void 0:f.id}/${(u=n.discordData)==null?void 0:u.avatar}?size=128`:`https://cdn.discordapp.com/embed/avatars/${n.discordData.discriminator%5}.png`}),m=R(()=>{var f,u;return`${(f=n.discordData)==null?void 0:f.username}#${(u=n.discordData)==null?void 0:u.discriminator}`});return(f,u)=>{const v=U,b=Y;return d(),h(b,{class:"max-w-[400px]"},{header:t(()=>[r("div",mn,[r("h1",null,k(o(m)),1),i.readOnly?H("",!0):(d(),h(v,{key:0,onClick:a,loading:o(c)},{default:t(()=>[g(" 取消綁定 ")]),_:1},8,["loading"]))])]),cover:t(()=>[r("div",fn,[r("img",{src:o(s)},null,8,hn),r("img",{src:o(_),class:"rounded-full absolute left-0 bottom-0 !w-28 border-8 ml-3",style:{"border-color":"var(--n-color)"}},null,8,gn)])]),_:1})}}}),vn=r("h2",{class:"text-2xl text-center mb-4"},"Join our discord",-1),yn=r("iframe",{src:"https://discord.com/widget?id=902904317986607165&theme=dark",width:"100%",height:"500",allowtransparency:"true",frameborder:"0",sandbox:"allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts"},null,-1),xn=L({__name:"LinkDiscord",setup(i){const n=S();return(l,c)=>{const a=Le,s=pn,_=ne;return d(),j(M,null,[o(n).discordData?(d(),h(a,{key:0,discordData:o(n).discordData},null,8,["discordData"])):(d(),h(s,{key:1})),e(_),vn,yn],64)}}}),$n={class:"flex flex-col gap-1"},bn=r("span",null,"姓名",-1),jn={class:"flex flex-col gap-1"},kn=r("span",null,"手機",-1),wn={class:"flex flex-col gap-1"},Cn=r("span",null,"學號",-1),Ln={class:"flex flex-col gap-1"},Pn=r("span",null,"系級",-1),Dn=L({__name:"User",setup(i){const n=z(),l=J(),c=S(),a=Re({...c.userData}),s=w(!1),_=(f,u)=>new RegExp(f).test(u),m=async()=>{if(a.phone===""||a.name===""||a.inSchool&&(a.dept===""||a.studentId==="")){n.error("欄位不得為空");return}if(!_("^09[0-9]{8}$",a.phone)){n.error("手機號碼錯誤");return}if(a.inSchool&&!_("^1(0[6-9]|1[0-2])(([1-7])(0|5|6)|ZU)[0-9]{4}$",a.studentId)){n.error("學號格式錯誤");return}s.value=!0,l.start();try{await c.userUpdate(a),a.value={...c.userData},n.success("儲存成功")}catch(f){n.error(f.message)}l.finish(),s.value=!1};return(f,u)=>{const v=xe,b=$e,p=K,y=O,x=Je,$=U,P=ue;return d(),h(y,{vertical:""},{default:t(()=>[e(b,{value:o(a).inSchool,"onUpdate:value":u[0]||(u[0]=C=>o(a).inSchool=C),name:"radiobuttongroup1",disabled:o(s)},{default:t(()=>[e(v,{value:!0,label:"政大學生"}),e(v,{value:!1,label:"政大校友/校外人士"})]),_:1},8,["value","disabled"]),r("div",$n,[bn,e(p,{placeholder:"姓名",value:o(a).name,"onUpdate:value":u[1]||(u[1]=C=>o(a).name=C),disabled:o(s)},null,8,["value","disabled"])]),r("div",jn,[kn,e(p,{placeholder:"手機",value:o(a).phone,"onUpdate:value":u[2]||(u[2]=C=>o(a).phone=C),disabled:o(s)},null,8,["value","disabled"])]),e(x,{show:o(a).inSchool},{default:t(()=>[e(y,{vertical:""},{default:t(()=>[r("div",wn,[Cn,e(p,{placeholder:"學號",value:o(a).studentId,"onUpdate:value":u[3]||(u[3]=C=>o(a).studentId=C),disabled:o(s)},null,8,["value","disabled"])]),r("div",Ln,[Pn,e(p,{placeholder:"系級",value:o(a).dept,"onUpdate:value":u[4]||(u[4]=C=>o(a).dept=C),disabled:o(s)},null,8,["value","disabled"])])]),_:1})]),_:1},8,["show"]),e(y,{align:"center",class:"mt-2"},{default:t(()=>[e($,{onClick:m,loading:o(s),disabled:o(c).isUserCompleted},{default:t(()=>[g(" 儲存 ")]),_:1},8,["loading","disabled"]),o(c).isUserCompleted?(d(),h(P,{key:0,bordered:!1},{default:t(()=>[g("已經填寫完成，若要更改請洽幹部")]),_:1})):H("",!0)]),_:1})]),_:1})}}}),In={name:"MdiPencil"},Mn={width:"1em",height:"1em",viewBox:"0 0 24 24"},Sn=r("path",{fill:"currentColor",d:"M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83l3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"},null,-1),Rn=[Sn];function Un(i,n,l,c,a,s){return d(),j("svg",Mn,Rn)}const Hn=N(In,[["render",Un]]),En={name:"MdiShareVariant"},An={width:"1em",height:"1em",viewBox:"0 0 24 24"},Bn=r("path",{fill:"currentColor",d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7c0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3a3 3 0 0 0-3-3a3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3a3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66c0 1.61 1.31 2.91 2.92 2.91c1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"},null,-1),Fn=[Bn];function zn(i,n,l,c,a,s){return d(),j("svg",An,Fn)}const qn=N(En,[["render",zn]]),On={class:"flex justify-between"},Nn={class:"flex items-center gap-1"},Tn=L({__name:"HostProjectCard",props:{project:{type:Object,default:()=>{}}},setup(i){const n=i,l=z(),c=R(()=>"https://member.andyjjrt.cc/projects/enter?id="+n.project.id),a=()=>{navigator.clipboard.writeText(c.value),l.success("已複製到剪貼簿")},s=R(()=>n.project.members.map(m=>({key:m,label:m}))),_=w(!1);return(m,f)=>{const u=Ke,v=ue,b=ve,p=We,y=Xe,x=et,$=qn,P=U,C=Hn,I=B("RouterLink"),D=O,F=Y,W=B("vue-qrcode"),X=K,se=be,ce=ye;return d(),j(M,null,[e(F,null,{header:t(()=>[r("div",On,[r("h2",null,k(i.project.name),1),r("div",Nn,[e(v,{bordered:!1,type:"info"},{default:t(()=>[e(u,{from:0,to:i.project.authCode,active:""},null,8,["to"])]),_:1})])])]),default:t(()=>[g(" "+k(i.project.description)+" ",1),e(D,{justify:"space-between",align:"center"},{default:t(()=>[e(x,{options:o(s),size:20,max:3,class:"mt-2"},{avatar:t(({option:{label:V,key:ee}})=>[e(p,null,{trigger:t(()=>[e(b,{size:"small"},{default:t(()=>[g(k(ee[0]),1)]),_:2},1024)]),default:t(()=>[g(" "+k(V),1)]),_:2},1024)]),rest:t(({options:V,rest:ee})=>[e(y,{options:V,placement:"top"},{default:t(()=>[e(b,{size:"small"},{default:t(()=>[g("+"+k(ee),1)]),_:2},1024)]),_:2},1032,["options"])]),_:1},8,["options"]),e(D,null,{default:t(()=>[e(P,{text:"",onClick:f[0]||(f[0]=V=>_.value=!0)},{default:t(()=>[e($)]),_:1}),e(I,{to:{name:"Edit Project",query:{id:i.project.id}}},{default:t(()=>[e(P,{text:""},{default:t(()=>[e(C)]),_:1})]),_:1},8,["to"])]),_:1})]),_:1})]),_:1}),e(ce,{show:o(_),"onUpdate:show":f[1]||(f[1]=V=>A(_)?_.value=V:null),"transform-origin":"center"},{default:t(()=>[e(F,{class:"max-w-xs rounded-2xl",title:"分享",bordered:!1,role:"dialog","aria-modal":"true"},{default:t(()=>[e(D,{vertical:""},{default:t(()=>[e(D,{justify:"center"},{default:t(()=>[e(W,{value:o(c)},null,8,["value"])]),_:1}),e(se,null,{default:t(()=>[e(X,{readonly:"","default-value":o(c)},null,8,["default-value"]),e(P,{type:"primary",ghost:"",onClick:a},{default:t(()=>[g(" 複製 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["show"])],64)}}}),Vn={class:"flex justify-between"},Gn=r("h2",null,"我加入的專案",-1),Zn=r("br",null,null,-1),Qn=r("br",null,null,-1),Yn={class:"flex justify-between"},Jn=r("h2",null,"我開啟的專案",-1),Kn=L({__name:"MyProjects",setup(i){const n=S(),l=c=>{window.open(c)};return(c,a)=>{const s=U,_=B("RouterLink"),m=je,f=Y,u=pe,v=O,b=Tn;return d(),h(v,{vertical:""},{default:t(()=>[e(f,null,{header:t(()=>[r("div",Vn,[Gn,e(_,{to:{name:"Enter Project"}},{default:t(()=>[e(s,null,{default:t(()=>[g(" 加入專案 ")]),_:1})]),_:1})])]),default:t(()=>[e(v,{vertical:""},{default:t(()=>[(d(!0),j(M,null,G(o(n).joinedProjects,p=>(d(),h(f,{title:p.name},{default:t(()=>[g(k(p.description)+" ",1),Zn,e(m,{"negative-text":null,onPositiveClick:y=>l(p.link)},{trigger:t(()=>[e(s,{text:"",tag:"a",type:"primary"},{default:t(()=>[g("專案連結")]),_:1})]),default:t(()=>[g(" 即將前往: "+k(p.link),1),Qn,g(" 此網站由"+k(p.name)+"提供，請留意網路安全 ",1)]),_:2},1032,["onPositiveClick"])]),_:2},1032,["title"]))),256)),!o(n).joinedProjects||o(n).joinedProjects.length===0?(d(),h(u,{key:0,description:"尚無專案"})):H("",!0)]),_:1})]),_:1}),e(f,null,{header:t(()=>[r("div",Yn,[Jn,e(_,{to:{name:"Create Project"}},{default:t(()=>[e(s,null,{default:t(()=>[g("新增專案")]),_:1})]),_:1})])]),default:t(()=>[e(v,{vertical:""},{default:t(()=>[(d(!0),j(M,null,G(o(n).createdProjects,p=>(d(),h(b,{project:p},null,8,["project"]))),256)),!o(n).createdProjects||o(n).createdProjects.length===0?(d(),h(u,{key:0,description:"尚無專案"})):H("",!0)]),_:1})]),_:1})]),_:1})}}}),Wn={class:"flex flex-col gap-1"},Xn=r("span",null,"專案名稱",-1),eo={class:"flex flex-col gap-1"},to=r("span",null,"專案敘述",-1),no={class:"flex flex-col gap-1"},oo=r("span",null,"專案連結(ex: 投影片)",-1),so=L({__name:"CreateProject",setup(i){const n=S(),l=z(),c=Q(),a=w(""),s=w(""),_=w(""),m=w(!1),f=async()=>{m.value=!0;try{await n.createProject(a.value,s.value,_.value),l.success("成功新增專案"),c.push({name:"My Projects"})}catch(u){l.error(u.message)}m.value=!1};return(u,v)=>{const b=K,p=ue,y=U,x=O;return d(),h(x,{vertical:""},{default:t(()=>[r("div",Wn,[Xn,e(b,{placeholder:"專案名稱",value:o(a),"onUpdate:value":v[0]||(v[0]=$=>A(a)?a.value=$:null),disabled:o(m)},null,8,["value","disabled"])]),r("div",eo,[to,e(b,{disabled:o(m),placeholder:"專案敘述",value:o(s),"onUpdate:value":v[1]||(v[1]=$=>A(s)?s.value=$:null),type:"textarea",maxlength:"30","show-count":""},null,8,["disabled","value"])]),r("div",no,[oo,e(b,{placeholder:"專案連結(ex: 投影片)",value:o(_),"onUpdate:value":v[2]||(v[2]=$=>A(_)?_.value=$:null),disabled:o(m)},null,8,["value","disabled"])]),e(x,{justify:"end",align:"center"},{default:t(()=>[!o(n).isDiscordConnected||!o(n).isUserCompleted?(d(),h(p,{key:0,bordered:!1},{default:t(()=>[g(" 請先填寫個人資料及綁定discord ")]),_:1})):H("",!0),e(y,{onClick:f,loading:o(m),disabled:!o(n).isDiscordConnected||!o(n).isUserCompleted},{default:t(()=>[g(" 新增專案 ")]),_:1},8,["loading","disabled"])]),_:1})]),_:1})}}}),ao={class:"flex justify-between items-center"},co=r("div",null,"請先填寫個人資料及綁定discord",-1),lo=L({__name:"EnterProjectButton",props:{id:{type:String,default:""}},setup(i){const n=i,l=S(),c=z(),a=w(""),s=w(!1),_=R(()=>u=>l.joinedProjects.findIndex(v=>v.id===u)>=0),m=R(()=>u=>l.createdProjects.findIndex(v=>v.id===u)>=0),f=async()=>{s.value=!0;try{await l.joinProject(n.id,a.value),c.success("成功加入專案")}catch(u){c.error(u.message)}s.value=!1};return(u,v)=>{const b=de,p=U,y=B("RouterLink"),x=K,$=be;return o(m)(i.id)?(d(),h(b,{key:0,title:"已是專案主持人",type:"info"})):o(_)(i.id)?(d(),h(b,{key:1,title:"已經加入專案",type:"success"})):!o(l).isUserCompleted||!o(l).isDiscordConnected?(d(),h(b,{key:2,type:"warning"},{header:t(()=>[r("div",ao,[co,e(y,{to:"/"},{default:t(()=>[e(p,{type:"warning",size:"tiny"},{default:t(()=>[g("回到首頁")]),_:1})]),_:1})])]),_:1})):(d(),h($,{key:3,class:"mt-2"},{default:t(()=>[e(x,{placeholder:"authCode",value:o(a),"onUpdate:value":v[0]||(v[0]=P=>A(a)?a.value=P:null),disabled:o(s)},null,8,["value","disabled"]),e(p,{type:"primary",ghost:"",loading:o(s),onClick:f},{default:t(()=>[g(" 加入 ")]),_:1},8,["loading"])]),_:1}))}}}),ro={class:"w-full"},io=r("br",null,null,-1),_o=L({__name:"EnterProject",setup(i){const n=z(),l=T();Q();const c=S(),a=w([]),s=w(!0),_=R(()=>l.query.id||null),m=R(()=>_.value?[a.value.find(u=>u.id===_.value)].filter(u=>u!==void 0):a.value);te(async()=>{const u=await E("get",{params:{type:"projects",uid:c.getId}});s.value=!1;const{data:v,success:b}=u.data;if(!b){n.error(v);return}a.value=v});const f=u=>{window.open(u)};return(u,v)=>{const b=tt,p=U,y=B("RouterLink"),x=pe,$=je,P=lo,C=O,I=Y;return d(),h(I,{title:o(_)?"加入專案":"所有專案"},{default:t(()=>[e(C,{vertical:""},{default:t(()=>[o(s)?(d(),j(M,{key:0},[e(b,{text:"",repeat:2}),g(),e(b,{text:"",style:{width:"60%"}})],64)):o(m).length===0?(d(),h(x,{key:1,description:o(_)?"無此專案":"尚無專案"},Ue({_:2},[o(_)?{name:"extra",fn:t(()=>[e(y,{to:{name:"Enter Project"}},{default:t(()=>[e(p,{size:"small"},{default:t(()=>[g("瀏覽所有專案")]),_:1})]),_:1})]),key:"0"}:void 0]),1032,["description"])):(d(!0),j(M,{key:2},G(o(m),D=>(d(),h(I,{title:D.name},{"header-extra":t(()=>[g(k(D.leader),1)]),default:t(()=>[e(C,{vertical:""},{default:t(()=>[g(k(D.description)+" ",1),e($,{width:"trigger","negative-text":null,onPositiveClick:F=>f(D.link)},{trigger:t(()=>[r("div",ro,[e(p,{text:"",tag:"a",type:"primary"},{default:t(()=>[g("專案連結")]),_:1})])]),default:t(()=>[g(" 即將前往: "+k(D.link),1),io,g(" 此網站由"+k(D.name)+"提供，請留意網路安全 ",1)]),_:2},1032,["onPositiveClick"]),e(P,{id:D.id},null,8,["id"])]),_:2},1024)]),_:2},1032,["title"]))),256))]),_:1})]),_:1},8,["title"])}}}),uo={class:"flex flex-col gap-1"},po=r("span",null,"專案名稱",-1),mo={class:"flex flex-col gap-1"},fo=r("span",null,"專案敘述",-1),ho={class:"flex flex-col gap-1"},go=r("span",null,"專案連結(ex: 投影片)",-1),vo={class:"flex flex-col gap-1"},yo=r("span",null,"許願mentor類別",-1),xo={class:"flex flex-col gap-1"},$o=r("span",null,"許願mentor",-1),bo=L({__name:"EditProject",setup(i){const n=S(),l=z(),c=Q(),a=T(),s=w(!1),_=R(()=>n.createdProjects.find(y=>y.id===a.query.id)),m=w(_==null?void 0:_.value.name),f=w(_==null?void 0:_.value.description),u=w(_==null?void 0:_.value.link),v=w(_==null?void 0:_.value.mentorType),b=w(_==null?void 0:_.value.mentorName),p=async()=>{s.value=!0;try{await n.editProject(m.value,f.value,u.value,a.query.id,v.value,b.value),l.success("成功編輯專案"),c.push({name:"My Projects"})}catch(y){l.error(y.message)}s.value=!1};return(y,x)=>{const $=K,P=U,C=O;return d(),h(C,{vertical:""},{default:t(()=>[r("div",uo,[po,e($,{placeholder:"專案名稱",value:o(m),"onUpdate:value":x[0]||(x[0]=I=>A(m)?m.value=I:null),disabled:o(s)},null,8,["value","disabled"])]),r("div",mo,[fo,e($,{disabled:o(s),placeholder:"專案敘述",value:o(f),"onUpdate:value":x[1]||(x[1]=I=>A(f)?f.value=I:null),type:"textarea",maxlength:"30","show-count":""},null,8,["disabled","value"])]),r("div",ho,[go,e($,{placeholder:"專案連結(ex: 投影片)",value:o(u),"onUpdate:value":x[2]||(x[2]=I=>A(u)?u.value=I:null),disabled:o(s)},null,8,["value","disabled"])]),r("div",vo,[yo,e($,{placeholder:"許願mentor類別(ex: UI/UX)",value:o(v),"onUpdate:value":x[3]||(x[3]=I=>A(v)?v.value=I:null),disabled:o(s)},null,8,["value","disabled"])]),r("div",xo,[$o,e($,{placeholder:"許願mentor姓名",value:o(b),"onUpdate:value":x[4]||(x[4]=I=>A(b)?b.value=I:null),disabled:o(s)},null,8,["value","disabled"])]),e(C,{justify:"end"},{default:t(()=>[e(P,{onClick:p,loading:o(s)},{default:t(()=>[g("儲存專案")]),_:1},8,["loading"])]),_:1})]),_:1})}}}),jo=L({__name:"GoogleLoginButton",emits:["handleGoogleLogin"],setup(i,{emit:n}){const l=S(),c=J(),a=z();Q();const s=async _=>{try{l.appReady=!1,c.start(),await l.googleLogin(_.credential),c.finish(),n("handleGoogleLogin",le(_.credential))}catch(m){a.error(m),l.googleLogout()}};return(_,m)=>{const f=B("GoogleLogin");return d(),h(f,{callback:s})}}}),ko={class:"h-full w-full flex justify-center items-center"},wo=["src"],Co=L({__name:"Login",setup(i){const n=Q(),l=T(),c=R(()=>l.redirectedFrom),a=s=>{n.push(c.value?{name:c.value.name,query:c.value.query}:{name:"Home"})};return(s,_)=>{const m=jo,f=ke;return d(),j("div",ko,[e(f,{title:"GDSC NCCU"},{icon:t(()=>[r("img",{src:o(re),width:"150"},null,8,wo)]),footer:t(()=>[e(m,{onHandleGoogleLogin:a})]),_:1})])}}}),Lo={};function Po(i,n){const l=nt,c=U,a=B("RouterLink"),s=ot,_=st;return d(),h(_,{class:"px-2"},{default:t(()=>[e(s,null,{suffix:t(()=>[e(a,{to:{name:"Log"}},{default:t(()=>[e(c,null,{default:t(()=>[g("前往")]),_:1})]),_:1})]),default:t(()=>[e(l,{title:"Log","content-style":"margin-top: 10px;"})]),_:1}),e(s,null,{suffix:t(()=>[e(a,{to:{name:"AdminProjects"}},{default:t(()=>[e(c,null,{default:t(()=>[g("前往")]),_:1})]),_:1})]),default:t(()=>[e(l,{title:"Projects","content-style":"margin-top: 10px;"})]),_:1})]),_:1})}const Do=N(Lo,[["render",Po]]),Io={name:"MdiCloseCircle"},Mo={width:"1em",height:"1em",viewBox:"0 0 24 24"},So=r("path",{fill:"currentColor",d:"M12 2c5.53 0 10 4.47 10 10s-4.47 10-10 10S2 17.53 2 12S6.47 2 12 2m3.59 5L12 10.59L8.41 7L7 8.41L10.59 12L7 15.59L8.41 17L12 13.41L15.59 17L17 15.59L13.41 12L17 8.41L15.59 7Z"},null,-1),Ro=[So];function Uo(i,n,l,c,a,s){return d(),j("svg",Mo,Ro)}const Ho=N(Io,[["render",Uo]]),Eo={key:1,class:"grid grid-cols-2 sm:grid-cols-3"},Ao={class:"grid grid-cols-2 gap-2"},Bo=r("h2",{class:"text-xl"},"加入的專案",-1),Fo=r("h2",{class:"text-xl"},"建立的專案",-1),zo={class:"grid grid-cols-3"},qo=r("h3",{class:"text-xl"},"上學期資料",-1),Oo={class:"flex gap-2"},No={key:0,class:"flex items-center text-green-600 text-xl"},To={key:1,class:"flex items-center text-red-500 text-xl"},Vo={class:"flex gap-2"},Go={key:0,class:"flex items-center text-green-600 text-xl"},Zo={key:1,class:"flex items-center text-red-500 text-xl"},Qo={class:"flex gap-2"},Yo={key:0,class:"flex items-center text-green-600 text-xl"},Jo={key:1,class:"flex items-center text-red-500 text-xl"},Ko={class:"flex flex-col gap-1"},Wo=r("span",null,"金額",-1),Xo=L({__name:"Payment",setup(i){const n=T(),l=z(),c=J(),a=S(),s=w(null),_=w(1),m=w(""),f=w(!1),u=R(()=>s.value.joinedProjects.length>0||s.value.createdProjects.length>0?{type:"社員",count:q.社員}:s.value.paidCount>=q.會員?{type:"會員",count:q.會員}:{type:"Insider",count:0});te(async()=>{await v()});const v=async()=>{c.start();const p=n.query.id,y=await E("get",{params:{type:"checkPayment",uid:a.getId,id:p}});c.finish();const{data:x,success:$}=y.data;if(!$){l.error(x);return}s.value=x},b=async p=>{if(p.preventDefault(),m.value===""){l.error("請填入金額");return}f.value=!0;const y=await E("post",{data:{type:"payment",uid:a.getId,id:n.query.id,payment:(_.value*parseInt(m.value)).toString()}});f.value=!1;const{data:x,success:$}=y.data;if(!$){l.error(x);return}l.success("紀錄完成"),s.value=null,_.value=1,await v()};return(p,y)=>{const x=de,$=_e,P=ne,C=Le,I=pe,D=Y,F=O,W=we,X=Ho,se=xe,ce=$e,V=K,ee=U;return o(s)?(d(),h(F,{key:0,vertical:""},{default:t(()=>{var me,fe,he;return[((me=o(s))==null?void 0:me.user.name)===""||o(s).user.phone===""?(d(),h(x,{key:0,type:"info",title:"個人資料尚未完成"})):(d(),j("div",Eo,[e($,{label:"姓名"},{default:t(()=>[g(k(o(s).user.name),1)]),_:1}),e($,{label:"電話"},{default:t(()=>[g(k(o(s).user.phone),1)]),_:1}),o(s).user.inSchool?(d(),h($,{key:0,label:"學號"},{default:t(()=>[g(k(o(s).user.studentId),1)]),_:1})):H("",!0),o(s).user.inSchool?(d(),h($,{key:1,label:"系級"},{default:t(()=>[g(k(o(s).user.dept),1)]),_:1})):H("",!0),e($,{label:"身分"},{default:t(()=>[g(k(o(s).user.inSchool?"政大學生":"政大校友/校外人士"),1)]),_:1})])),e(P),((fe=o(s))==null?void 0:fe.discord)===null?(d(),h(x,{key:2,type:"info",title:"Discord 尚未綁定"})):(d(),h(C,{key:3,readOnly:"",discordData:(he=o(s))==null?void 0:he.discord},null,8,["discordData"])),e(P),r("div",Ao,[e(F,{vertical:""},{default:t(()=>[Bo,o(s).joinedProjects.length===0?(d(),h(D,{key:0},{default:t(()=>[e(I,{description:"尚無專案"})]),_:1})):H("",!0),(d(!0),j(M,null,G(o(s).joinedProjects,Z=>(d(),h(D,{title:Z.name},null,8,["title"]))),256))]),_:1}),e(F,{vertical:""},{default:t(()=>[Fo,o(s).createdProjects.length===0?(d(),h(D,{key:0},{default:t(()=>[e(I,{description:"尚無專案"})]),_:1})):H("",!0),(d(!0),j(M,null,G(o(s).createdProjects,Z=>(d(),h(D,{title:Z.name},null,8,["title"]))),256))]),_:1})]),e(P),r("div",zo,[e($,{label:"當前身分"},{default:t(()=>[g(k(o(u).type),1)]),_:1}),e($,{label:"應繳金額"},{default:t(()=>[g(k(o(u).count),1)]),_:1}),e($,{label:"已繳金額"},{default:t(()=>[g(k(o(s).paidCount),1)]),_:1})]),e(P),o(s).oldMember?(d(),h(F,{key:4,vertical:""},{default:t(()=>[qo,r("div",Oo,[o(s).oldMember.name===o(s).user.name?(d(),j("span",No,[e(W)])):(d(),j("span",To,[e(X)])),r("span",null,"姓名: "+k(o(s).oldMember.name),1)]),r("div",Vo,[o(s).oldMember.email===o(s).user.email?(d(),j("span",Go,[e(W)])):(d(),j("span",Zo,[e(X)])),r("span",null,"email: "+k(o(s).oldMember.email||"無資料"),1)]),r("div",Qo,[o(s).oldMember.studentId===o(s).user.studentId?(d(),j("span",Yo,[e(W)])):(d(),j("span",Jo,[e(X)])),r("span",null,"學號: "+k(o(s).oldMember.studentId||"無資料"),1)])]),_:1})):(d(),h(x,{key:5,type:"info",title:"無上學期社員資訊"})),e(P),e(D,null,{default:t(()=>[r("form",{onSubmit:b},[e(F,{vertical:""},{default:t(()=>[e(ce,{value:o(_),"onUpdate:value":y[0]||(y[0]=Z=>A(_)?_.value=Z:null),name:"radiobuttongroup1",class:"w-full",disabled:o(f)},{default:t(()=>[e(se,{value:1,label:"收款",class:"w-[calc(50%_-_0.5px)] text-center"}),e(se,{value:-1,label:"退款",class:"w-[calc(50%_-_0.5px)] text-center"})]),_:1},8,["value","disabled"]),r("div",Ko,[Wo,e(V,{placeholder:"金額",value:o(m),"onUpdate:value":y[1]||(y[1]=Z=>A(m)?m.value=Z:null),disabled:o(f)},null,8,["value","disabled"])]),e(F,{justify:"end"},{default:t(()=>[e(ee,{"attr-type":"submit",loading:o(f)},{default:t(()=>[g("紀錄")]),_:1},8,["loading"])]),_:1})]),_:1})],32)]),_:1}),e(x,{type:"info",title:"上學期社費抵免請分開紀錄"})]}),_:1})):H("",!0)}}}),es=L({__name:"Log",setup(i){T();const n=z(),l=J(),c=w(!1),a=S(),s=w([]),_=w([]),m=[{title:"Id",key:"index"},{title:"時間",key:"time",render(p){return new Date(p.time).toLocaleString()},sorter:"default",ellipsis:!0},{title:"姓名",key:"userId",render(p){var y;return(y=_.value.find(x=>x.id==p.userId))==null?void 0:y.name}},{title:"Core",key:"coreId",render(p){var y;return(y=_.value.find(x=>x.id==p.coreId))==null?void 0:y.name},sorter:"default",ellipsis:!0},{title:"Count",key:"count"},{title:"Action",key:"actions",render(p){return p.check?"已付款":He(U,{type:"primary",size:"small",onClick:()=>b(p.index)},{default:()=>"確認收款"})}}],f={pageSize:10},u=R(()=>({total:_.value.length,projectMember:_.value.filter(p=>(p.createdProjects.length>0||p.joinedProjects.length>0)&&(p.isCore||p.isFullYear||(p.isLastSemester?p.paidCount>=q.社員-200:p.paidCount>=q.社員))).filter(p=>!p.isCore),member:_.value.filter(p=>p.createdProjects.length===0&&p.joinedProjects.length===0&&(p.isCore||(p.isLastSemester?p.paidCount>=q.會員-200:p.paidCount>=q.會員))).filter(p=>!p.isCore)})),v=async()=>{l.start(),c.value=!0;const p=await E("get",{params:{type:"log",uid:a.getId}});l.finish(),c.value=!1;const{data:y,success:x}=p.data;if(!x){n.error(y);return}s.value=y.log,_.value=y.user},b=async p=>{l.start(),c.value=!0;const y=await E("post",{data:{type:"checkLog",uid:a.getId,index:p}});l.finish();const{data:x,success:$}=y.data;if(!$){n.error(x),c.value=!1;return}v()};return te(()=>{v()}),(p,y)=>{const x=_e,$=at,P=ct,C=lt,I=rt,D=it,F=ae;return d(),h(F,{show:o(c)},{default:t(()=>[e(D,{type:"line",animated:""},{default:t(()=>[e(C,{name:"總覽",tab:"總覽"},{default:t(()=>[e(P,null,{default:t(()=>[e($,{span:8},{default:t(()=>[e(x,{label:"總數",value:o(u).total},null,8,["value"])]),_:1}),e($,{span:8},{default:t(()=>[e(x,{label:"社員",value:o(u).projectMember.length},null,8,["value"])]),_:1}),e($,{span:8},{default:t(()=>[e(x,{label:"會員",value:o(u).member.length},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(C,{name:"社費紀錄",tab:"社費紀錄"},{default:t(()=>[e(I,{columns:m,data:o(s),pagination:f},null,8,["data"])]),_:1}),e(C,{name:"jay chou",tab:"Jay Chou"},{default:t(()=>[g(" Qilixiang ")]),_:1})]),_:1})]),_:1},8,["show"])}}}),ts={class:"flex flex-wrap items-center gap-2"},ns=r("span",null,"Leader:",-1),os=["href"],ss=r("br",null,null,-1),as={class:"flex flex-wrap items-center gap-2"},cs=r("span",null,"Members:",-1),ls=["href"],rs=L({__name:"Projects",setup(i){T();const n=z(),l=J(),c=w(!1),a=S(),s=w([]),_=async()=>{l.start(),c.value=!0;const m=await E("get",{params:{type:"projectsByCore",uid:a.getId}});l.finish(),c.value=!1;const{data:f,success:u}=m.data;if(!u){n.error(f);return}s.value=f};return te(()=>{_()}),(m,f)=>{const u=ne,v=dt,b=_t,p=ae;return d(),h(p,{show:o(c)},{default:t(()=>[e(b,null,{default:t(()=>[(d(!0),j(M,null,G(o(s),y=>(d(),h(v,{title:y.name,name:y.id},{"header-extra":t(()=>[g(k(y.leader.name),1)]),default:t(()=>[g(k(y.description)+" ",1),e(u),r("div",ts,[ns,r("a",{href:`/payment?id=${y.leader.id}`,target:"_blanks"},[e(o(U),{type:"info"},{default:t(()=>[g(k(y.leader.name),1)]),_:2},1024)],8,os)]),ss,r("div",as,[cs,(d(!0),j(M,null,G(y.members,x=>(d(),j("a",{href:`/payment?id=${x.id}`,target:"_blanks"},[e(o(U),{type:"primary"},{default:t(()=>[g(k(x.name),1)]),_:2},1024)],8,ls))),256))])]),_:2},1032,["title","name"]))),256))]),_:1})]),_:1},8,["show"])}}}),is={};function _s(i,n){const l=U,c=B("RouterLink"),a=ke,s=O;return d(),h(s,{class:"h-full",align:"center",justify:"center"},{default:t(()=>[e(a,{status:"404",title:"404 Not Found",description:"You know life is always ridiculous."},{footer:t(()=>[e(c,{to:"/"},{default:t(()=>[e(l,null,{default:t(()=>[g("Back Home")]),_:1})]),_:1})]),_:1})]),_:1})}const ds=N(is,[["render",_s]]),us=L({__name:"Discord",setup(i){const n=T(),l=Q(),c=S(),a=J(),s=z(),_=R(()=>n.query.code);return te(async()=>{try{a.start(),await c.discordLogin(_.value),a.finish(),s.success("綁定成功"),l.push({name:"Link Discord"})}catch(m){a.finish(),s.error(m.message),l.push({name:"Link Discord"})}}),(m,f)=>"正在綁定你的discord，請不要離開此頁"}}),ps=[{path:"/",name:"Home",component:dn,meta:{breadCrumb:[{text:"Home"}]}},{path:"/link-discord",name:"Link Discord",component:xn,meta:{breadCrumb:[{text:"Home",to:{name:"Home"}},{text:"Link Discord"}]}},{path:"/user",name:"User",component:Dn,meta:{breadCrumb:[{text:"Home",to:{name:"Home"}},{text:"User"}]}},{path:"/projects",children:[{path:"",name:"My Projects",component:Kn,meta:{breadCrumb:[{text:"Home",to:{name:"Home"}},{text:"My Projects"}]}},{path:"create",name:"Create Project",component:so,meta:{breadCrumb:[{text:"Home",to:{name:"Home"}},{text:"My Projects",to:{name:"My Projects"}},{text:"Create Project"}]}},{path:"enter",name:"Enter Project",component:_o,meta:{breadCrumb:[{text:"Home",to:{name:"Home"}},{text:"My Projects",to:{name:"My Projects"}},{text:"Enter Project"}]}},{path:"edit",name:"Edit Project",component:bo,meta:{breadCrumb:[{text:"Home",to:{name:"Home"}},{text:"My Projects",to:{name:"My Projects"}},{text:"Edit Project"}]}}]},{path:"/admin",children:[{path:"",name:"Admin",component:Do,meta:{breadCrumb:[{text:"Admin"}]}},{path:"log",name:"Log",component:es,meta:{breadCrumb:[{text:"Admin",to:{name:"Admin"}},{text:"Log"}]}},{path:"projects",name:"AdminProjects",component:rs,meta:{breadCrumb:[{text:"Admin",to:{name:"Admin"}},{text:"Projects"}]}}]},{path:"/login",name:"Login",component:Co},{path:"/payment",name:"Payment",component:Xo},{path:"/auth/callback",children:[{path:"discord",component:us}]},{path:"/:pathMatch(.*)*",name:"NotFound",component:ds}],Pe=Ee({history:Ae(),routes:ps});Pe.beforeEach(i=>{const n=S();if(!n.credential&&i.name!=="Login")return{name:"Login"};if(n.credential&&i.name==="Login")return{name:"Home"}});const ms=Be(),oe=Fe(yt);oe.use(ze,{clientId:"1074271718336-6bd2eece404794eqmtpptar29v2u7kg9.apps.googleusercontent.com"});oe.use(Pe);oe.use(ms);oe.component(ge.name,ge);oe.mount("#app");
