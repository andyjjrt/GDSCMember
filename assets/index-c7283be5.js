import{d as D,as as G,at as B,au as d,av as h,aw as t,ax as k,F as I,ay as O,az as n,c as y,aA as C,aB as de,aC as Re,aD as re,aE as W,aF as r,aG as e,aH as A,aI as He,aJ as Ae,aK as Fe,r as L,n as S,aL as z,aM as $e,ao as Be,o as te,aN as Ee,z as _e,aO as ze,aP as Oe,aQ as qe,aR as Ve,aS as Ne,aT as Te,aU as xe}from"./vendor-f9a0eac0.js";import{_ as Ge,a as Ye,b as be,c as U,d as Ze,e as le,f as Qe,g as Ke,h as Je,i as We,j as Xe,N as et,k as ke,l as se,m as ae,n as Y,o as q,p as ue,u as V,q as X,r as je,s as we,t as ne,v as tt,w as pe,x as nt,y as ot,z as st,A as at,B as Ce,C as me,D as Le,E as ct,F as fe,G as lt,H as De,I as Pe,J as he,K as rt,L as it,M as dt,O as _t}from"./naive-8bbc33c8.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))c(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&c(i)}).observe(document,{childList:!0,subtree:!0});function l(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerpolicy&&(o.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?o.credentials="include":a.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function c(a){if(a.ep)return;a.ep=!0;const o=l(a);fetch(a.href,o)}})();const ut=D({__name:"BreadCrumb",setup(_){const s=G();return(l,c)=>{const a=B("RouterLink"),o=Ge,i=Ye;return d(),h(i,{separator:">",class:"p-5 pb-0"},{default:t(()=>[(d(!0),k(I,null,O(n(s).meta.breadCrumb,p=>(d(),h(o,null,{default:t(()=>[p.to?(d(),h(a,{key:0,to:p.to},{default:t(()=>[y(C(p.text),1)]),_:2},1032,["to"])):(d(),k(I,{key:1},[y(C(p.text),1)],64))]),_:2},1024))),256))]),_:1})}}}),ie="/assets/Logo-891bf623.png";de.defaults.headers.post["Content-Type"]="text/plain";de.defaults.headers.get["Content-Type"]="text/plain";const pt=async(_,s,l,c)=>{if(c!==void 0)var{params:a={},data:o={}}=c;else a=o=null;const i={url:_,method:s,params:a,data:o,baseURL:l,timeout:0,...c};return de(i).then(p=>p).catch(p=>{throw p})},F=(_,s)=>pt("https://script.google.com/macros/s/AKfycbz2I8VDF-2XCVQ6zCu9H8wLK1JsOqCstO4cW5uvBdwTUaDFIRabzDUvValY5ouB9WDO/exec",_,"",{...s}),R=Re("user",{state:()=>({credential:localStorage.getItem("credential"),googleData:null,discordData:null,userData:null,createdProjects:null,joinedProjects:null,paid:0,appReady:!1,isCore:!1,isFullYear:!1,isLastSemester:!1}),getters:{getAvatar(_){var s;return(s=_.googleData)==null?void 0:s.picture},getId(_){var s;return(s=_.googleData)==null?void 0:s.sub},getEmail(_){var s;return(s=_.googleData)==null?void 0:s.email},isGoogleReady(_){return _.googleData!==null},isAppReady(_){return _.appReady},isUserCompleted(_){var s,l;return((s=_.userData)==null?void 0:s.name)!==""&&((l=_.userData)==null?void 0:l.phone)!==""},isDiscordConnected(_){return _.discordData!==null}},actions:{async googleLogin(_){if(_){const s=re(_);if(s.exp*1e3<new Date().getTime())this.googleLogout();else{localStorage.setItem("credential",_),this.googleData=s,this.credential=_;const l=await F("post",{data:{type:"google",uid:s.sub,email:s.email}}),{data:c,success:a}=l.data;if(!a)throw new Error(c);this.userData=c.user,this.discordData=c.discord,this.createdProjects=c.createdProjects,this.joinedProjects=c.joinedProjects,this.paid=c.paidCount}}else if(this.credential){const s=re(this.credential);if(s.exp*1e3<new Date().getTime())this.googleLogout();else{this.googleData=s;const l=await F("get",{params:{uid:s.sub}}),{data:c,success:a}=l.data;if(!a)throw new Error(c);this.userData=c.user,this.discordData=c.discord,this.createdProjects=c.createdProjects,this.joinedProjects=c.joinedProjects,this.paid=c.paidCount,this.isCore=c.isCore,this.isLastSemester=c.isLastSemester,this.isFullYear=c.isFullYear}}else this.googleData={};this.appReady=!0},async discordLogin(_){const s=await F("post",{data:{type:"discord",uid:this.getId,code:_}}),{data:l,success:c}=s.data;if(!c)throw new Error(l);this.discordData=l},async discordReset(_){const s=await F("post",{data:{uid:this.getId,type:"discord",code:_,reset:!0}}),{data:l,success:c}=s.data;if(!c)throw new Error(l);this.discordData=null},async userUpdate(_){const s=await F("post",{data:{uid:this.getId,type:"user",name:_.name,phone:_.phone,inSchool:_.inSchool,dept:_.inSchool?_.dept:null,studentId:_.inSchool?_.studentId:null}}),{data:l,success:c}=s.data;if(!c)throw new Error(l);this.userData=l},async joinProject(_,s){const l=await F("post",{data:{uid:this.getId,type:"joinProject",id:_,authCode:s}}),{data:c,success:a}=l.data;if(!a)throw new Error(c);this.joinedProjects=c},async createProject(_,s,l){const c=await F("post",{data:{uid:this.getId,type:"createProject",name:_,description:s,link:l}}),{data:a,success:o}=c.data;if(!o)throw new Error(a);this.createdProjects=[...this.createdProjects,a]},async editProject(_,s,l,c,a,o){const i=await F("post",{data:{uid:this.getId,type:"editProject",name:_,description:s,id:c,link:l,mentorType:a,mentorName:o}}),{data:p,success:m}=i.data;if(!m)throw new Error(p);this.createdProjects=this.createdProjects.map(f=>f.id===p.id?{...f,...p}:f)},googleLogout(){localStorage.removeItem("credential"),this.credential=null,this.googleData={},this.discordData=null,this.userData=null}}}),mt={class:"flex w-full items-center justify-between"},ft=r("h2",{class:"text-xl"},"GDSC Member",-1),ht={key:0,class:"flex items-center gap-2"},gt=D({__name:"PageHeader",setup(_){const s=R(),l=W(),c=()=>{s.googleLogout(),l.push({name:"Login"})};return(a,o)=>{const i=be,p=B("RouterLink"),m=U,f=Ze;return d(),h(f,{class:"h-18 p-5",bordered:""},{default:t(()=>[r("div",mt,[e(p,{to:{name:"Home"},tag:"div",class:"flex items-center gap-2"},{default:t(()=>[e(i,{src:n(ie),color:"."},null,8,["src"]),ft]),_:1}),n(s).credential?(d(),k("div",ht,[e(m,{size:"medium",onClick:c},{default:t(()=>[y("登出")]),_:1}),e(i,{round:"",src:n(s).getAvatar,"fallback-src":n(ie)},null,8,["src","fallback-src"])])):A("",!0)])]),_:1})}}}),vt=D({__name:"Index",async setup(_){let s,l;const c=R(),a=G();return a.name!=="Login"&&([s,l]=He(()=>c.googleLogin()),await s,l()),(o,i)=>{const p=gt,m=ut,f=B("RouterView"),g=le;return d(),h(g,{show:!n(c).isAppReady,class:"h-full"},{default:t(()=>[n(a).name!=="Login"?(d(),h(p,{key:0})):A("",!0),n(c).isAppReady&&n(a).name!=="Login"?(d(),h(m,{key:1})):A("",!0),r("div",{class:Ae(["p-5",{"h-full":n(a).name==="Login"}])},[e(f)],2)]),_:1},8,["show"])}}});const yt=D({__name:"App",setup(_){return(s,l)=>{const c=le,a=Je,o=We,i=Xe,p=Ke;return d(),h(p,{theme:n(Qe),class:"h-full w-full"},{default:t(()=>[e(o,null,{default:t(()=>[e(a,null,{default:t(()=>[(d(),h(Fe,null,{fallback:t(()=>[e(c,{loading:"",class:"h-full w-full"})]),default:t(()=>[e(vt)]),_:1}))]),_:1})]),_:1}),e(i)]),_:1},8,["theme"])}}}),xt={name:"MdiQrcode"},N=(_,s)=>{const l=_.__vccOpts||_;for(const[c,a]of s)l[c]=a;return l},$t={width:"1em",height:"1em",viewBox:"0 0 24 24"},bt=r("path",{fill:"currentColor",d:"M3 11h2v2H3v-2m8-6h2v4h-2V5m-2 6h4v4h-2v-2H9v-2m6 0h2v2h2v-2h2v2h-2v2h2v4h-2v2h-2v-2h-4v2h-2v-4h4v-2h2v-2h-2v-2m4 8v-4h-2v4h2M15 3h6v6h-6V3m2 2v2h2V5h-2M3 3h6v6H3V3m2 2v2h2V5H5M3 15h6v6H3v-6m2 2v2h2v-2H5Z"},null,-1),kt=[bt];function jt(_,s,l,c,a,o){return d(),k("svg",$t,kt)}const wt=N(xt,[["render",jt]]),H={社員:700,會員:500},Ct={class:"flex items-center justify-between"},Lt=r("h2",null,"收據",-1),Dt={class:"grid grid-cols-3"},Pt=D({__name:"Receipt",setup(_){const s=R(),l=L(!1),c=S(()=>s.joinedProjects.length>0||s.createdProjects.length>0?{type:"社員",count:H.社員+(s.isLastSemester?-200:0)}:s.paid>=H.會員?{type:"會員",count:H.會員+(s.isLastSemester?-200:0)}:{type:"Insider",count:0}),a=S(()=>`https://member.gdscnccu.com/payment?id=${s.getId}`);return(o,i)=>{const p=wt,m=et,f=U,g=ke,b=se,$=ae,x=Y,u=B("vue-qrcode"),v=q,j=ue;return d(),k(I,null,[e(x,null,{header:t(()=>[r("div",Ct,[Lt,e(f,{text:"",onClick:i[0]||(i[0]=w=>l.value=!0),"icon-placement":"right"},{icon:t(()=>[e(m,{class:"text-xl"},{default:t(()=>[e(p)]),_:1})]),default:t(()=>[y(" 繳費 ")]),_:1})])]),default:t(()=>[r("div",Dt,[e(g,{label:"當前身分"},{default:t(()=>[y(C(n(c).type),1)]),_:1}),e(g,{label:"應繳金額"},{default:t(()=>[y(C(n(c).count),1)]),_:1}),e(g,{label:"已繳金額"},{default:t(()=>[y(C(n(s).paid),1)]),_:1})]),n(s).isCore?(d(),k(I,{key:0},[e(b),e($,{title:"你是core",type:"success"})],64)):(d(),k(I,{key:1},[n(c).count<n(s).paid?(d(),k(I,{key:0},[e(b),e($,{title:"您繳的社費大於應繳金額，請找幹部領取退款",type:"info"})],64)):n(c).count>n(s).paid?(d(),k(I,{key:1},[e(b),e($,{title:"您的社費尚未繳齊，請找幹部補繳",type:"error"})],64)):(d(),k(I,{key:2},[],64)),n(s).isFullYear?(d(),k(I,{key:3},[e(b),e($,{title:"上學期已繳交社費",type:"success"})],64)):A("",!0)],64))]),_:1}),e(j,{show:n(l),"onUpdate:show":i[1]||(i[1]=w=>z(l)?l.value=w:null),"transform-origin":"center"},{default:t(()=>[e(x,{class:"max-w-xs rounded-2xl",title:"繳費",bordered:!1,role:"dialog","aria-modal":"true"},{default:t(()=>[e(v,{vertical:""},{default:t(()=>[e(v,{justify:"center"},{default:t(()=>[e(u,{value:n(a)},null,8,["value"])]),_:1}),e(b),e($,{title:"請出示此QRcode給幹部",type:"info"})]),_:1})]),_:1})]),_:1},8,["show"])],64)}}}),It={name:"Fa6SolidUserPlus"},Mt={width:"1.25em",height:"1em",viewBox:"0 0 640 512"},St=r("path",{fill:"currentColor",d:"M352 128c0 70.7-57.3 128-128 128S96 198.7 96 128S153.3 0 224 0s128 57.3 128 128zM0 482.3C0 383.8 79.8 304 178.3 304h91.4c98.5 0 178.3 79.8 178.3 178.3c0 16.4-13.3 29.7-29.7 29.7H29.7C13.3 512 0 498.7 0 482.3zM504 312v-64h-64c-13.3 0-24-10.7-24-24s10.7-24 24-24h64v-64c0-13.3 10.7-24 24-24s24 10.7 24 24v64h64c13.3 0 24 10.7 24 24s-10.7 24-24 24h-64v64c0 13.3-10.7 24-24 24s-24-10.7-24-24z"},null,-1),Ut=[St];function Rt(_,s,l,c,a,o){return d(),k("svg",Mt,Ut)}const Ht=N(It,[["render",Rt]]),At={name:"Fa6SolidUser"},Ft={width:"0.88em",height:"1em",viewBox:"0 0 448 512"},Bt=r("path",{fill:"currentColor",d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0S96 57.3 96 128s57.3 128 128 128zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512h388.6c16.4 0 29.7-13.3 29.7-29.7c0-98.5-79.8-178.3-178.3-178.3h-91.4z"},null,-1),Et=[Bt];function zt(_,s,l,c,a,o){return d(),k("svg",Ft,Et)}const Ot=N(At,[["render",zt]]),qt={name:"MdiCheckCircle"},Vt={width:"1em",height:"1em",viewBox:"0 0 24 24"},Nt=r("path",{fill:"currentColor",d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10s10-4.5 10-10S17.5 2 12 2m-2 15l-5-5l1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9Z"},null,-1),Tt=[Nt];function Gt(_,s,l,c,a,o){return d(),k("svg",Vt,Tt)}const Ie=N(qt,[["render",Gt]]),Yt={name:"LogosDiscordIcon"},Zt={width:"1.29em",height:"1em",viewBox:"0 0 256 199"},Qt=r("path",{fill:"#5865F2",d:"M216.856 16.597A208.502 208.502 0 0 0 164.042 0c-2.275 4.113-4.933 9.645-6.766 14.046c-19.692-2.961-39.203-2.961-58.533 0c-1.832-4.4-4.55-9.933-6.846-14.046a207.809 207.809 0 0 0-52.855 16.638C5.618 67.147-3.443 116.4 1.087 164.956c22.169 16.555 43.653 26.612 64.775 33.193A161.094 161.094 0 0 0 79.735 175.3a136.413 136.413 0 0 1-21.846-10.632a108.636 108.636 0 0 0 5.356-4.237c42.122 19.702 87.89 19.702 129.51 0a131.66 131.66 0 0 0 5.355 4.237a136.07 136.07 0 0 1-21.886 10.653c4.006 8.02 8.638 15.67 13.873 22.848c21.142-6.58 42.646-16.637 64.815-33.213c5.316-56.288-9.08-105.09-38.056-148.36ZM85.474 135.095c-12.645 0-23.015-11.805-23.015-26.18s10.149-26.2 23.015-26.2c12.867 0 23.236 11.804 23.015 26.2c.02 14.375-10.148 26.18-23.015 26.18Zm85.051 0c-12.645 0-23.014-11.805-23.014-26.18s10.148-26.2 23.014-26.2c12.867 0 23.236 11.804 23.015 26.2c0 14.375-10.148 26.18-23.015 26.18Z"},null,-1),Kt=[Qt];function Jt(_,s,l,c,a,o){return d(),k("svg",Zt,Kt)}const Me=N(Yt,[["render",Jt]]),Wt={name:"Form"},Xt={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},en=r("path",{fill:"currentColor",d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2M7 7h2v2H7V7m0 4h2v2H7v-2m0 4h2v2H7v-2m10 2h-6v-2h6v2m0-4h-6v-2h6v2m0-4h-6V7h6v2Z"},null,-1),tn=[en];function nn(_,s,l,c,a,o){return d(),k("svg",Xt,tn)}const on=N(Wt,[["render",nn]]),sn={name:"CheckinIcon"},an={width:"1em",height:"1em",viewBox:"0 0 24 24"},cn=r("path",{fill:"currentColor",d:"M20 2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-8.24 11.28L9.69 11.2c-.38-.39-.38-1.01 0-1.4a.996.996 0 0 1 1.41 0l1.36 1.37l4.42-4.46a.996.996 0 0 1 1.41 0c.38.39.38 1.01 0 1.4l-5.13 5.17c-.37.4-1.01.4-1.4 0zM3 6c-.55 0-1 .45-1 1v13c0 1.1.9 2 2 2h13c.55 0 1-.45 1-1s-.45-1-1-1H5c-.55 0-1-.45-1-1V7c0-.55-.45-1-1-1z"},null,-1),ln=[cn];function rn(_,s,l,c,a,o){return d(),k("svg",an,ln)}const dn=N(sn,[["render",rn]]),_n={class:"flex justify-between"},un={class:"flex gap-2 items-center"},pn=r("h2",null,"社課簽到",-1),mn={class:"flex justify-between"},fn={class:"flex gap-2 items-center"},hn=r("h2",null,"社課筆記",-1),gn={class:"flex justify-between"},vn={class:"flex gap-2 items-center"},yn=r("h2",null,"社團表單",-1),xn={class:"flex justify-between"},$n={class:"flex gap-2 items-center"},bn=r("h2",null,"Discord綁定",-1),kn={class:"flex items-center text-green-600 text-2xl"},jn={class:"flex justify-between"},wn={class:"flex gap-2 items-center"},Cn=r("h2",null,"個人資料",-1),Ln={class:"flex items-center text-green-600 text-2xl"},Dn={class:"flex justify-between"},Pn={class:"flex gap-2 items-center"},In=r("h2",null,"我的專案",-1),Mn=D({__name:"Index",setup(_){const s=R(),l=L(!1),c=S(()=>`https://member.gdscnccu.com/checkin?id=${s.getId}`);return(a,o)=>{const i=dn,p=Y,m=B("RouterLink"),f=on,g=se,b=Me,$=Ie,x=Ot,u=Ht,v=Pt,j=q,w=B("vue-qrcode"),P=ae,M=ue;return d(),k(I,null,[e(j,{vertical:""},{default:t(()=>[e(p,{onClick:o[0]||(o[0]=E=>l.value=!0),class:"cursor-pointer"},{header:t(()=>[r("div",_n,[r("div",un,[e(i),pn])])]),_:1}),e(m,{to:"/records"},{default:t(()=>[e(p,null,{header:t(()=>[r("div",mn,[r("div",fn,[e(n($e),{icon:"mdi:file-document-edit"}),hn])])]),_:1})]),_:1}),e(m,{to:"/forms"},{default:t(()=>[e(p,null,{header:t(()=>[r("div",gn,[r("div",vn,[e(f),yn])])]),_:1})]),_:1}),e(g),e(m,{to:"/link-discord"},{default:t(()=>[e(p,null,{header:t(()=>[r("div",xn,[r("div",$n,[e(b),bn]),r("span",kn,[n(s).isDiscordConnected?(d(),h($,{key:0})):A("",!0)])])]),_:1})]),_:1}),e(m,{to:"/user"},{default:t(()=>[e(p,null,{header:t(()=>[r("div",jn,[r("div",wn,[e(x),Cn]),r("span",Ln,[n(s).isUserCompleted?(d(),h($,{key:0})):A("",!0)])])]),_:1})]),_:1}),e(m,{to:"/projects"},{default:t(()=>[e(p,null,{header:t(()=>[r("div",Dn,[r("div",Pn,[e(u),In])])]),_:1})]),_:1}),e(g),e(v)]),_:1}),e(M,{show:n(l),"onUpdate:show":o[1]||(o[1]=E=>z(l)?l.value=E:null),"transform-origin":"center"},{default:t(()=>[e(p,{class:"max-w-xs rounded-2xl",title:"社課簽到",bordered:!1,role:"dialog","aria-modal":"true"},{default:t(()=>[e(j,{vertical:""},{default:t(()=>[e(j,{justify:"center"},{default:t(()=>[e(w,{value:n(c)},null,8,["value"])]),_:1}),e(g),e(P,{title:"請出示此QRcode給幹部",type:"info"})]),_:1})]),_:1})]),_:1},8,["show"])],64)}}}),Sn=["href"],Un=D({__name:"LoginButton",setup(_){const s=S(()=>"https://discord.com/api/oauth2/authorize?client_id=1069510883719520266&redirect_uri=https%3A%2F%2Fmember.gdscnccu.com%2Fauth%2Fcallback%2Fdiscord&response_type=code&scope=identify%20email");return(l,c)=>{const a=Me,o=U;return d(),k("a",{href:n(s)},[e(o,null,{icon:t(()=>[e(a)]),default:t(()=>[y(" 綁定Discord ")]),_:1})],8,Sn)}}}),Rn={class:"flex justify-between items-center mt-[-10px]"},Hn={class:"relative pb-12"},An=["src"],Fn=["src"],Se=D({__name:"Profile",props:{discordData:{type:Object,default:()=>{}},readOnly:{type:Boolean,default:!1}},setup(_){const s=_,l=R(),c=L(!1),a=async()=>{var m;c.value=!0,await l.discordReset((m=s.discordData)==null?void 0:m.id),c.value=!1},o=S(()=>{var m,f;return s.discordData.banner?`https://cdn.discordapp.com/banners/${(m=s.discordData)==null?void 0:m.id}/${(f=s.discordData)==null?void 0:f.banner}?size=512`:s.discordData.banner_color?`https://singlecolorimage.com/get/${s.discordData.banner_color.split("#")[1]}/512x175`:"https://singlecolorimage.com/get/ffffff/512x175"}),i=S(()=>{var m,f;return s.discordData.avatar?`https://cdn.discordapp.com/avatars/${(m=s.discordData)==null?void 0:m.id}/${(f=s.discordData)==null?void 0:f.avatar}?size=128`:`https://cdn.discordapp.com/embed/avatars/${s.discordData.discriminator%5}.png`}),p=S(()=>{var m,f;return`${(m=s.discordData)==null?void 0:m.username}#${(f=s.discordData)==null?void 0:f.discriminator}`});return(m,f)=>{const g=U,b=Y;return d(),h(b,{class:"max-w-[400px]"},{header:t(()=>[r("div",Rn,[r("h1",null,C(n(p)),1),_.readOnly?A("",!0):(d(),h(g,{key:0,onClick:a,loading:n(c)},{default:t(()=>[y(" 取消綁定 ")]),_:1},8,["loading"]))])]),cover:t(()=>[r("div",Hn,[r("img",{src:n(o)},null,8,An),r("img",{src:n(i),class:"rounded-full absolute left-0 bottom-0 !w-28 border-8 ml-3",style:{"border-color":"var(--n-color)"}},null,8,Fn)])]),_:1})}}}),Bn=r("h2",{class:"text-2xl text-center mb-4"},"Join our discord",-1),En=r("iframe",{src:"https://discord.com/widget?id=902904317986607165&theme=dark",width:"100%",height:"500",allowtransparency:"true",frameborder:"0",sandbox:"allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts"},null,-1),zn=D({__name:"LinkDiscord",setup(_){const s=R();return(l,c)=>{const a=Se,o=Un,i=se;return d(),k(I,null,[n(s).discordData?(d(),h(a,{key:0,discordData:n(s).discordData},null,8,["discordData"])):(d(),h(o,{key:1})),e(i),Bn,En],64)}}}),On={class:"flex flex-col gap-1"},qn=r("span",null,"姓名",-1),Vn={class:"flex flex-col gap-1"},Nn=r("span",null,"手機",-1),Tn={class:"flex flex-col gap-1"},Gn=r("span",null,"學號",-1),Yn={class:"flex flex-col gap-1"},Zn=r("span",null,"系級",-1),Qn=D({__name:"User",setup(_){const s=V(),l=X(),c=R(),a=Be({...c.userData}),o=L(!1),i=(m,f)=>new RegExp(m).test(f),p=async()=>{if(a.phone===""||a.name===""||a.inSchool&&(a.dept===""||a.studentId==="")){s.error("欄位不得為空");return}if(!i("^09[0-9]{8}$",a.phone)){s.error("手機號碼錯誤");return}if(a.inSchool&&!i("^1(0[6-9]|1[0-2])(([1-7])(0|5|6)|ZU)[0-9]{4}$",a.studentId)){s.error("學號格式錯誤");return}o.value=!0,l.start();try{await c.userUpdate(a),a.value={...c.userData},s.success("儲存成功")}catch(m){s.error(m.message)}l.finish(),o.value=!1};return(m,f)=>{const g=je,b=we,$=ne,x=q,u=tt,v=U,j=pe;return d(),h(x,{vertical:""},{default:t(()=>[e(b,{value:n(a).inSchool,"onUpdate:value":f[0]||(f[0]=w=>n(a).inSchool=w),name:"radiobuttongroup1",disabled:n(o)},{default:t(()=>[e(g,{value:!0,label:"政大學生"}),e(g,{value:!1,label:"政大校友/校外人士"})]),_:1},8,["value","disabled"]),r("div",On,[qn,e($,{placeholder:"姓名",value:n(a).name,"onUpdate:value":f[1]||(f[1]=w=>n(a).name=w),disabled:n(o)},null,8,["value","disabled"])]),r("div",Vn,[Nn,e($,{placeholder:"手機",value:n(a).phone,"onUpdate:value":f[2]||(f[2]=w=>n(a).phone=w),disabled:n(o)},null,8,["value","disabled"])]),e(u,{show:n(a).inSchool},{default:t(()=>[e(x,{vertical:""},{default:t(()=>[r("div",Tn,[Gn,e($,{placeholder:"學號",value:n(a).studentId,"onUpdate:value":f[3]||(f[3]=w=>n(a).studentId=w),disabled:n(o)},null,8,["value","disabled"])]),r("div",Yn,[Zn,e($,{placeholder:"系級",value:n(a).dept,"onUpdate:value":f[4]||(f[4]=w=>n(a).dept=w),disabled:n(o)},null,8,["value","disabled"])])]),_:1})]),_:1},8,["show"]),e(x,{align:"center",class:"mt-2"},{default:t(()=>[e(v,{onClick:p,loading:n(o),disabled:n(c).isUserCompleted},{default:t(()=>[y(" 儲存 ")]),_:1},8,["loading","disabled"]),n(c).isUserCompleted?(d(),h(j,{key:0,bordered:!1},{default:t(()=>[y("已經填寫完成，若要更改請洽幹部")]),_:1})):A("",!0)]),_:1})]),_:1})}}}),Kn={name:"MdiPencil"},Jn={width:"1em",height:"1em",viewBox:"0 0 24 24"},Wn=r("path",{fill:"currentColor",d:"M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83l3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"},null,-1),Xn=[Wn];function eo(_,s,l,c,a,o){return d(),k("svg",Jn,Xn)}const to=N(Kn,[["render",eo]]),no={name:"MdiShareVariant"},oo={width:"1em",height:"1em",viewBox:"0 0 24 24"},so=r("path",{fill:"currentColor",d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7c0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3a3 3 0 0 0-3-3a3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3a3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66c0 1.61 1.31 2.91 2.92 2.91c1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"},null,-1),ao=[so];function co(_,s,l,c,a,o){return d(),k("svg",oo,ao)}const lo=N(no,[["render",co]]),ro={class:"flex justify-between"},io={class:"flex items-center gap-1"},_o=D({__name:"HostProjectCard",props:{project:{type:Object,default:()=>{}}},setup(_){const s=_,l=V(),c=S(()=>"https://member.gdscnccu.com/projects/enter?id="+s.project.id),a=()=>{navigator.clipboard.writeText(c.value),l.success("已複製到剪貼簿")},o=S(()=>s.project.members.map(p=>({key:p,label:p}))),i=L(!1);return(p,m)=>{const f=nt,g=pe,b=be,$=ot,x=st,u=at,v=lo,j=U,w=to,P=B("RouterLink"),M=q,E=Y,Q=B("vue-qrcode"),K=ne,ee=Ce,T=ue;return d(),k(I,null,[e(E,null,{header:t(()=>[r("div",ro,[r("h2",null,C(_.project.name),1),r("div",io,[e(g,{bordered:!1,type:"info"},{default:t(()=>[e(f,{from:0,to:_.project.authCode,active:""},null,8,["to"])]),_:1})])])]),default:t(()=>[y(" "+C(_.project.description)+" ",1),e(M,{justify:"space-between",align:"center"},{default:t(()=>[e(u,{options:n(o),size:20,max:3,class:"mt-2"},{avatar:t(({option:{label:Z,key:oe}})=>[e($,null,{trigger:t(()=>[e(b,{size:"small"},{default:t(()=>[y(C(oe[0]),1)]),_:2},1024)]),default:t(()=>[y(" "+C(Z),1)]),_:2},1024)]),rest:t(({options:Z,rest:oe})=>[e(x,{options:Z,placement:"top"},{default:t(()=>[e(b,{size:"small"},{default:t(()=>[y("+"+C(oe),1)]),_:2},1024)]),_:2},1032,["options"])]),_:1},8,["options"]),e(M,null,{default:t(()=>[e(j,{text:"",onClick:m[0]||(m[0]=Z=>i.value=!0)},{default:t(()=>[e(v)]),_:1}),e(P,{to:{name:"Edit Project",query:{id:_.project.id}}},{default:t(()=>[e(j,{text:""},{default:t(()=>[e(w)]),_:1})]),_:1},8,["to"])]),_:1})]),_:1})]),_:1}),e(T,{show:n(i),"onUpdate:show":m[1]||(m[1]=Z=>z(i)?i.value=Z:null),"transform-origin":"center"},{default:t(()=>[e(E,{class:"max-w-xs rounded-2xl",title:"分享",bordered:!1,role:"dialog","aria-modal":"true"},{default:t(()=>[e(M,{vertical:""},{default:t(()=>[e(M,{justify:"center"},{default:t(()=>[e(Q,{value:n(c)},null,8,["value"])]),_:1}),e(ee,null,{default:t(()=>[e(K,{readonly:"","default-value":n(c)},null,8,["default-value"]),e(j,{type:"primary",ghost:"",onClick:a},{default:t(()=>[y(" 複製 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["show"])],64)}}}),uo={class:"flex justify-between"},po=r("h2",null,"我加入的專案",-1),mo=r("br",null,null,-1),fo=r("br",null,null,-1),ho={class:"flex justify-between"},go=r("h2",null,"我開啟的專案",-1),vo=D({__name:"MyProjects",setup(_){const s=R(),l=c=>{window.open(c)};return(c,a)=>{const o=U,i=B("RouterLink"),p=Le,m=Y,f=me,g=q,b=_o;return d(),h(g,{vertical:""},{default:t(()=>[e(m,null,{header:t(()=>[r("div",uo,[po,e(i,{to:{name:"Enter Project"}},{default:t(()=>[e(o,null,{default:t(()=>[y(" 加入專案 ")]),_:1})]),_:1})])]),default:t(()=>[e(g,{vertical:""},{default:t(()=>[(d(!0),k(I,null,O(n(s).joinedProjects,$=>(d(),h(m,{title:$.name},{default:t(()=>[y(C($.description)+" ",1),mo,e(p,{"negative-text":null,onPositiveClick:x=>l($.link)},{trigger:t(()=>[e(o,{text:"",tag:"a",type:"primary"},{default:t(()=>[y("專案連結")]),_:1})]),default:t(()=>[y(" 即將前往: "+C($.link),1),fo,y(" 此網站由"+C($.name)+"提供，請留意網路安全 ",1)]),_:2},1032,["onPositiveClick"])]),_:2},1032,["title"]))),256)),!n(s).joinedProjects||n(s).joinedProjects.length===0?(d(),h(f,{key:0,description:"尚無專案"})):A("",!0)]),_:1})]),_:1}),e(m,null,{header:t(()=>[r("div",ho,[go,e(i,{to:{name:"Create Project"}},{default:t(()=>[e(o,null,{default:t(()=>[y("新增專案")]),_:1})]),_:1})])]),default:t(()=>[e(g,{vertical:""},{default:t(()=>[(d(!0),k(I,null,O(n(s).createdProjects,$=>(d(),h(b,{project:$},null,8,["project"]))),256)),!n(s).createdProjects||n(s).createdProjects.length===0?(d(),h(f,{key:0,description:"尚無專案"})):A("",!0)]),_:1})]),_:1})]),_:1})}}}),yo={class:"flex flex-col gap-1"},xo=r("span",null,"專案名稱",-1),$o={class:"flex flex-col gap-1"},bo=r("span",null,"專案敘述",-1),ko={class:"flex flex-col gap-1"},jo=r("span",null,"專案連結(ex: 投影片)",-1),wo=D({__name:"CreateProject",setup(_){const s=R(),l=V(),c=W(),a=L(""),o=L(""),i=L(""),p=L(!1),m=async()=>{p.value=!0;try{await s.createProject(a.value,o.value,i.value),l.success("成功新增專案"),c.push({name:"My Projects"})}catch(f){l.error(f.message)}p.value=!1};return(f,g)=>{const b=ne,$=pe,x=U,u=q;return d(),h(u,{vertical:""},{default:t(()=>[r("div",yo,[xo,e(b,{placeholder:"專案名稱",value:n(a),"onUpdate:value":g[0]||(g[0]=v=>z(a)?a.value=v:null),disabled:n(p)},null,8,["value","disabled"])]),r("div",$o,[bo,e(b,{disabled:n(p),placeholder:"專案敘述",value:n(o),"onUpdate:value":g[1]||(g[1]=v=>z(o)?o.value=v:null),type:"textarea",maxlength:"30","show-count":""},null,8,["disabled","value"])]),r("div",ko,[jo,e(b,{placeholder:"專案連結(ex: 投影片)",value:n(i),"onUpdate:value":g[2]||(g[2]=v=>z(i)?i.value=v:null),disabled:n(p)},null,8,["value","disabled"])]),e(u,{justify:"end",align:"center"},{default:t(()=>[!n(s).isDiscordConnected||!n(s).isUserCompleted?(d(),h($,{key:0,bordered:!1},{default:t(()=>[y(" 請先填寫個人資料及綁定discord ")]),_:1})):A("",!0),e(x,{onClick:m,loading:n(p),disabled:!n(s).isDiscordConnected||!n(s).isUserCompleted},{default:t(()=>[y(" 新增專案 ")]),_:1},8,["loading","disabled"])]),_:1})]),_:1})}}}),Co={class:"flex justify-between items-center"},Lo=r("div",null,"請先填寫個人資料及綁定discord",-1),Do=D({__name:"EnterProjectButton",props:{id:{type:String,default:""}},setup(_){const s=_,l=R(),c=V(),a=L(""),o=L(!1),i=S(()=>f=>l.joinedProjects.findIndex(g=>g.id===f)>=0),p=S(()=>f=>l.createdProjects.findIndex(g=>g.id===f)>=0),m=async()=>{o.value=!0;try{await l.joinProject(s.id,a.value),c.success("成功加入專案")}catch(f){c.error(f.message)}o.value=!1};return(f,g)=>{const b=ae,$=U,x=B("RouterLink"),u=ne,v=Ce;return n(p)(_.id)?(d(),h(b,{key:0,title:"已是專案主持人",type:"info"})):n(i)(_.id)?(d(),h(b,{key:1,title:"已經加入專案",type:"success"})):!n(l).isUserCompleted||!n(l).isDiscordConnected?(d(),h(b,{key:2,type:"warning"},{header:t(()=>[r("div",Co,[Lo,e(x,{to:"/"},{default:t(()=>[e($,{type:"warning",size:"tiny"},{default:t(()=>[y("回到首頁")]),_:1})]),_:1})])]),_:1})):(d(),h(v,{key:3,class:"mt-2"},{default:t(()=>[e(u,{placeholder:"authCode",value:n(a),"onUpdate:value":g[0]||(g[0]=j=>z(a)?a.value=j:null),disabled:n(o)},null,8,["value","disabled"]),e($,{type:"primary",ghost:"",loading:n(o),onClick:m},{default:t(()=>[y(" 加入 ")]),_:1},8,["loading"])]),_:1}))}}}),Po={class:"w-full"},Io=r("br",null,null,-1),Mo=D({__name:"EnterProject",setup(_){const s=V(),l=G();W();const c=R(),a=L([]),o=L(!0),i=S(()=>l.query.id||null),p=S(()=>i.value?[a.value.find(f=>f.id===i.value)].filter(f=>f!==void 0):a.value);te(async()=>{const f=await F("get",{params:{type:"projects",uid:c.getId}});o.value=!1;const{data:g,success:b}=f.data;if(!b){s.error(g);return}a.value=g});const m=f=>{window.open(f)};return(f,g)=>{const b=ct,$=U,x=B("RouterLink"),u=me,v=Le,j=Do,w=q,P=Y;return d(),h(P,{title:n(i)?"加入專案":"所有專案"},{default:t(()=>[e(w,{vertical:""},{default:t(()=>[n(o)?(d(),k(I,{key:0},[e(b,{text:"",repeat:2}),y(),e(b,{text:"",style:{width:"60%"}})],64)):n(p).length===0?(d(),h(u,{key:1,description:n(i)?"無此專案":"尚無專案"},Ee({_:2},[n(i)?{name:"extra",fn:t(()=>[e(x,{to:{name:"Enter Project"}},{default:t(()=>[e($,{size:"small"},{default:t(()=>[y("瀏覽所有專案")]),_:1})]),_:1})]),key:"0"}:void 0]),1032,["description"])):(d(!0),k(I,{key:2},O(n(p),M=>(d(),h(P,{title:M.name},{"header-extra":t(()=>[y(C(M.leader),1)]),default:t(()=>[e(w,{vertical:""},{default:t(()=>[y(C(M.description)+" ",1),e(v,{width:"trigger","negative-text":null,onPositiveClick:E=>m(M.link)},{trigger:t(()=>[r("div",Po,[e($,{text:"",tag:"a",type:"primary"},{default:t(()=>[y("專案連結")]),_:1})])]),default:t(()=>[y(" 即將前往: "+C(M.link),1),Io,y(" 此網站由"+C(M.name)+"提供，請留意網路安全 ",1)]),_:2},1032,["onPositiveClick"]),e(j,{id:M.id},null,8,["id"])]),_:2},1024)]),_:2},1032,["title"]))),256))]),_:1})]),_:1},8,["title"])}}}),So={class:"flex flex-col gap-1"},Uo=r("span",null,"專案名稱",-1),Ro={class:"flex flex-col gap-1"},Ho=r("span",null,"專案敘述",-1),Ao={class:"flex flex-col gap-1"},Fo=r("span",null,"專案連結(ex: 投影片)",-1),Bo={class:"flex flex-col gap-1"},Eo=r("span",null,"許願mentor類別",-1),zo={class:"flex flex-col gap-1"},Oo=r("span",null,"許願mentor",-1),qo=D({__name:"EditProject",setup(_){const s=R(),l=V(),c=W(),a=G(),o=L(!1),i=S(()=>s.createdProjects.find(x=>x.id===a.query.id)),p=L(i==null?void 0:i.value.name),m=L(i==null?void 0:i.value.description),f=L(i==null?void 0:i.value.link),g=L(i==null?void 0:i.value.mentorType),b=L(i==null?void 0:i.value.mentorName),$=async()=>{o.value=!0;try{await s.editProject(p.value,m.value,f.value,a.query.id,g.value,b.value),l.success("成功編輯專案"),c.push({name:"My Projects"})}catch(x){l.error(x.message)}o.value=!1};return(x,u)=>{const v=ne,j=U,w=q;return d(),h(w,{vertical:""},{default:t(()=>[r("div",So,[Uo,e(v,{placeholder:"專案名稱",value:n(p),"onUpdate:value":u[0]||(u[0]=P=>z(p)?p.value=P:null),disabled:n(o)},null,8,["value","disabled"])]),r("div",Ro,[Ho,e(v,{disabled:n(o),placeholder:"專案敘述",value:n(m),"onUpdate:value":u[1]||(u[1]=P=>z(m)?m.value=P:null),type:"textarea",maxlength:"30","show-count":""},null,8,["disabled","value"])]),r("div",Ao,[Fo,e(v,{placeholder:"專案連結(ex: 投影片)",value:n(f),"onUpdate:value":u[2]||(u[2]=P=>z(f)?f.value=P:null),disabled:n(o)},null,8,["value","disabled"])]),r("div",Bo,[Eo,e(v,{placeholder:"許願mentor類別(ex: UI/UX)",value:n(g),"onUpdate:value":u[3]||(u[3]=P=>z(g)?g.value=P:null),disabled:n(o)},null,8,["value","disabled"])]),r("div",zo,[Oo,e(v,{placeholder:"許願mentor姓名",value:n(b),"onUpdate:value":u[4]||(u[4]=P=>z(b)?b.value=P:null),disabled:n(o)},null,8,["value","disabled"])]),e(w,{justify:"end"},{default:t(()=>[e(j,{onClick:$,loading:n(o)},{default:t(()=>[y("儲存專案")]),_:1},8,["loading"])]),_:1})]),_:1})}}}),Vo=D({__name:"GoogleLoginButton",emits:["handleGoogleLogin"],setup(_,{emit:s}){const l=R(),c=X(),a=V();W();const o=async i=>{try{l.appReady=!1,c.start(),await l.googleLogin(i.credential),c.finish(),s("handleGoogleLogin",re(i.credential))}catch(p){a.error(p),l.googleLogout()}};return(i,p)=>{const m=B("GoogleLogin");return d(),h(m,{callback:o})}}}),No={class:"h-full w-full flex justify-center items-center"},To=["src"],Go=D({__name:"Login",setup(_){const s=W(),l=G(),c=S(()=>l.redirectedFrom),a=o=>{s.push(c.value?{name:c.value.name,query:c.value.query}:{name:"Home"})};return(o,i)=>{const p=Vo,m=fe;return d(),k("div",No,[e(m,{title:"GDSC NCCU"},{icon:t(()=>[r("img",{src:n(ie),width:"150"},null,8,To)]),footer:t(()=>[e(p,{onHandleGoogleLogin:a})]),_:1})])}}}),Yo={};function Zo(_,s){const l=lt,c=U,a=B("RouterLink"),o=De,i=Pe;return d(),h(i,{class:"px-2"},{default:t(()=>[e(o,null,{suffix:t(()=>[e(a,{to:{name:"Log"}},{default:t(()=>[e(c,null,{default:t(()=>[y("前往")]),_:1})]),_:1})]),default:t(()=>[e(l,{title:"Log","content-style":"margin-top: 10px;"})]),_:1}),e(o,null,{suffix:t(()=>[e(a,{to:{name:"AdminProjects"}},{default:t(()=>[e(c,null,{default:t(()=>[y("前往")]),_:1})]),_:1})]),default:t(()=>[e(l,{title:"Projects","content-style":"margin-top: 10px;"})]),_:1})]),_:1})}const Qo=N(Yo,[["render",Zo]]),Ko={name:"MdiCloseCircle"},Jo={width:"1em",height:"1em",viewBox:"0 0 24 24"},Wo=r("path",{fill:"currentColor",d:"M12 2c5.53 0 10 4.47 10 10s-4.47 10-10 10S2 17.53 2 12S6.47 2 12 2m3.59 5L12 10.59L8.41 7L7 8.41L10.59 12L7 15.59L8.41 17L12 13.41L15.59 17L17 15.59L13.41 12L17 8.41L15.59 7Z"},null,-1),Xo=[Wo];function es(_,s,l,c,a,o){return d(),k("svg",Jo,Xo)}const ts=N(Ko,[["render",es]]),ns={key:1,class:"grid grid-cols-2 sm:grid-cols-3"},os={class:"grid grid-cols-2 gap-2"},ss=r("h2",{class:"text-xl"},"加入的專案",-1),as=r("h2",{class:"text-xl"},"建立的專案",-1),cs={class:"grid grid-cols-3"},ls=r("h3",{class:"text-xl"},"上學期資料",-1),rs={class:"flex gap-2"},is={key:0,class:"flex items-center text-green-600 text-xl"},ds={key:1,class:"flex items-center text-red-500 text-xl"},_s={class:"flex gap-2"},us={key:0,class:"flex items-center text-green-600 text-xl"},ps={key:1,class:"flex items-center text-red-500 text-xl"},ms={class:"flex gap-2"},fs={key:0,class:"flex items-center text-green-600 text-xl"},hs={key:1,class:"flex items-center text-red-500 text-xl"},gs={class:"flex flex-col gap-1"},vs=r("span",null,"金額",-1),ys=D({__name:"Payment",setup(_){const s=G(),l=V(),c=X(),a=R(),o=L(null),i=L(1),p=L(""),m=L(!1),f=S(()=>a.joinedProjects.length>0||a.createdProjects.length>0?{type:"社員",count:H.社員+(a.isLastSemester?-200:0)}:a.paid>=H.會員?{type:"會員",count:H.會員+(a.isLastSemester?-200:0)}:{type:"Insider",count:0});te(async()=>{await g()});const g=async()=>{c.start();const $=s.query.id,x=await F("get",{params:{type:"checkPayment",uid:a.getId,id:$}});c.finish();const{data:u,success:v}=x.data;if(!v){l.error(u);return}o.value=u},b=async $=>{if($.preventDefault(),p.value===""){l.error("請填入金額");return}m.value=!0;const x=await F("post",{data:{type:"payment",uid:a.getId,id:s.query.id,payment:(i.value*parseInt(p.value)).toString()}});m.value=!1;const{data:u,success:v}=x.data;if(!v){l.error(u);return}l.success("紀錄完成"),o.value=null,i.value=1,await g()};return($,x)=>{const u=ae,v=ke,j=se,w=Se,P=me,M=Y,E=q,Q=Ie,K=ts,ee=je,T=we,Z=ne,oe=U;return n(o)?(d(),h(E,{key:0,vertical:""},{default:t(()=>{var ge,ve,ye;return[((ge=n(o))==null?void 0:ge.user.name)===""||n(o).user.phone===""?(d(),h(u,{key:0,type:"info",title:"個人資料尚未完成"})):(d(),k("div",ns,[e(v,{label:"姓名"},{default:t(()=>[y(C(n(o).user.name),1)]),_:1}),e(v,{label:"電話"},{default:t(()=>[y(C(n(o).user.phone),1)]),_:1}),n(o).user.inSchool?(d(),h(v,{key:0,label:"學號"},{default:t(()=>[y(C(n(o).user.studentId),1)]),_:1})):A("",!0),n(o).user.inSchool?(d(),h(v,{key:1,label:"系級"},{default:t(()=>[y(C(n(o).user.dept),1)]),_:1})):A("",!0),e(v,{label:"身分"},{default:t(()=>[y(C(n(o).user.inSchool?"政大學生":"政大校友/校外人士"),1)]),_:1})])),e(j),((ve=n(o))==null?void 0:ve.discord)===null?(d(),h(u,{key:2,type:"info",title:"Discord 尚未綁定"})):(d(),h(w,{key:3,readOnly:"",discordData:(ye=n(o))==null?void 0:ye.discord},null,8,["discordData"])),e(j),r("div",os,[e(E,{vertical:""},{default:t(()=>[ss,n(o).joinedProjects.length===0?(d(),h(M,{key:0},{default:t(()=>[e(P,{description:"尚無專案"})]),_:1})):A("",!0),(d(!0),k(I,null,O(n(o).joinedProjects,J=>(d(),h(M,{title:J.name},null,8,["title"]))),256))]),_:1}),e(E,{vertical:""},{default:t(()=>[as,n(o).createdProjects.length===0?(d(),h(M,{key:0},{default:t(()=>[e(P,{description:"尚無專案"})]),_:1})):A("",!0),(d(!0),k(I,null,O(n(o).createdProjects,J=>(d(),h(M,{title:J.name},null,8,["title"]))),256))]),_:1})]),e(j),r("div",cs,[e(v,{label:"當前身分"},{default:t(()=>[y(C(n(f).type),1)]),_:1}),e(v,{label:"應繳金額"},{default:t(()=>[y(C(n(f).count),1)]),_:1}),e(v,{label:"已繳金額"},{default:t(()=>[y(C(n(o).paidCount),1)]),_:1})]),e(j),n(o).oldMember?(d(),h(E,{key:4,vertical:""},{default:t(()=>[ls,r("div",rs,[n(o).oldMember.name===n(o).user.name?(d(),k("span",is,[e(Q)])):(d(),k("span",ds,[e(K)])),r("span",null,"姓名: "+C(n(o).oldMember.name),1)]),r("div",_s,[n(o).oldMember.email===n(o).user.email?(d(),k("span",us,[e(Q)])):(d(),k("span",ps,[e(K)])),r("span",null,"email: "+C(n(o).oldMember.email||"無資料"),1)]),r("div",ms,[n(o).oldMember.studentId===n(o).user.studentId?(d(),k("span",fs,[e(Q)])):(d(),k("span",hs,[e(K)])),r("span",null,"學號: "+C(n(o).oldMember.studentId||"無資料"),1)])]),_:1})):(d(),h(u,{key:5,type:"info",title:"無上學期社員資訊"})),e(j),e(M,null,{default:t(()=>[r("form",{onSubmit:b},[e(E,{vertical:""},{default:t(()=>[e(T,{value:n(i),"onUpdate:value":x[0]||(x[0]=J=>z(i)?i.value=J:null),name:"radiobuttongroup1",class:"w-full",disabled:n(m)},{default:t(()=>[e(ee,{value:1,label:"收款",class:"w-[calc(50%_-_0.5px)] text-center"}),e(ee,{value:-1,label:"退款",class:"w-[calc(50%_-_0.5px)] text-center"})]),_:1},8,["value","disabled"]),r("div",gs,[vs,e(Z,{placeholder:"金額",value:n(p),"onUpdate:value":x[1]||(x[1]=J=>z(p)?p.value=J:null),disabled:n(m)},null,8,["value","disabled"])]),e(E,{justify:"end"},{default:t(()=>[e(oe,{"attr-type":"submit",loading:n(m)},{default:t(()=>[y("紀錄")]),_:1},8,["loading"])]),_:1})]),_:1})],32)]),_:1}),e(u,{type:"info",title:"上學期社費抵免請分開紀錄"})]}),_:1})):A("",!0)}}}),xs={key:0},$s=D({__name:"Checkin",setup(_){const s=G(),l=V(),c=X(),a=R(),o=L(null),i=L(!1),p=L(!1),m=S(()=>o.value?(o.value.createdProjects.length>0||o.value.joinedProjects.length>0)&&(o.value.isCore||o.value.isFullYear||(o.value.isLastSemester?o.value.paidCount>=H.社員-200:o.value.paidCount>=H.社員))?"社員":o.value.createdProjects.length===0&&o.value.joinedProjects.length===0&&(o.value.isCore||(o.value.isLastSemester?o.value.paidCount>=H.會員-200:o.value.paidCount>=H.會員))?"會員":"insider":"");te(async()=>{await f()});const f=async()=>{c.start();const b=s.query.id,$=await F("get",{params:{type:"checkPayment",uid:a.getId,id:b}});c.finish();const{data:x,success:u}=$.data;if(!u){l.error(x);return}o.value=x},g=async b=>{b.preventDefault(),i.value=!0;const $=await F("post",{data:{type:"checkin",uid:a.getId,id:s.query.id,checkinId:new Date().getFullYear().toString()+(new Date().getMonth()+1<10?"0":"")+(new Date().getMonth()+1).toString()+(new Date().getDate()<10?"0":"")+new Date().getDate().toString()}});i.value=!1;const{data:x,success:u}=$.data;if(!u){l.error(x);return}l.success("簽到完成"),p.value=!0};return(b,$)=>{const x=ae,u=U,v=fe;return n(o)?(d(),k("div",xs,[n(p)?(d(),h(v,{key:1,status:"success",title:"簽到成功",description:"你可以放心關掉這一頁了"})):(d(),h(v,{key:0,status:n(m)==="insider"&&n(o).checkinCount>0?"error":"success",title:n(m),description:"場次: "+n(o).checkinCount},{footer:t(()=>[n(m)==="insider"&&n(o).checkinCount>0?(d(),h(x,{key:0,title:"請先去繳費",type:"error"})):(d(),h(u,{key:1,size:"large",type:"primary",loading:n(i),onClick:g},{default:t(()=>[y("簽到")]),_:1},8,["loading"]))]),_:1},8,["status","title","description"]))])):A("",!0)}}}),bs=D({__name:"CheckinList",props:{userData:{type:Array,default:()=>[]},filterClass:{type:String,default:""}},setup(_){const s=_,l=[{title:"姓名",key:"name"},{title:"系所",key:"dept"},{title:"Email",key:"email"}],c={pageSize:10},a=S(()=>s.userData.filter(i=>i.checkin.indexOf(s.filterClass)>=0&&!i.isCore)),o=i=>({name:{value:_e("span",`共 ${a.value.length} 人`),colSpan:3}});return(i,p)=>{const m=he;return d(),h(m,{columns:l,data:n(a),pagination:c,summary:o},null,8,["data"])}}}),ks=D({__name:"UserList",props:{userData:{type:Array,default:()=>[]}},setup(_){const s=_,l=[{title:"姓名",key:"name"},{title:"系所",key:"dept"},{title:"Email",key:"email"}],c={pageSize:10},a=o=>({name:{value:_e("span",`共 ${s.userData.length} 人`),colSpan:3}});return(o,i)=>{const p=he;return d(),h(p,{columns:l,data:_.userData,pagination:c,summary:a},null,8,["data"])}}}),js=D({__name:"Log",setup(_){G();const s=V(),l=X(),c=L(!1),a=R(),o=L([]),i=L([]),p=[{title:"Id",key:"index"},{title:"時間",key:"time",render(u){return new Date(u.time).toLocaleString()},sorter:"default",ellipsis:!0},{title:"姓名",key:"userId",render(u){var v;return(v=i.value.find(j=>j.id==u.userId))==null?void 0:v.name}},{title:"Core",key:"coreId",render(u){var v;return(v=i.value.find(j=>j.id==u.coreId))==null?void 0:v.name},sorter:"default",ellipsis:!0},{title:"Count",key:"count"},{title:"Action",key:"actions",render(u){return u.check?"已付款":_e(U,{type:"primary",size:"small",onClick:()=>x(u.index)},{default:()=>"確認收款"})}}],m=["20230308","20230315","20230322","20230329","20230426"],f={pageSize:10},g=S(()=>({total:i.value.length,projectMember:i.value.filter(u=>(u.createdProjects.length>0||u.joinedProjects.length>0)&&(u.isCore||u.isFullYear||(u.isLastSemester?u.paidCount>=H.社員-200:u.paidCount>=H.社員))).filter(u=>!u.isCore),member:i.value.filter(u=>u.createdProjects.length===0&&u.joinedProjects.length===0&&(u.isCore||(u.isLastSemester?u.paidCount>=H.會員-200:u.paidCount>=H.會員))).filter(u=>!u.isCore),projectMemberMailList:i.value.filter(u=>(u.createdProjects.length!==0||u.joinedProjects.length!==0)&&!(u.isCore||u.isFullYear||(u.isLastSemester?u.paidCount>=H.社員-200:u.paidCount>=H.社員))),memberMailList:i.value.filter(u=>u.createdProjects.length===0&&u.joinedProjects.length===0&&!(u.isCore||(u.isLastSemester?u.paidCount>=H.會員-200:u.paidCount>=H.會員))&&u.name!=="")})),b=S(()=>{const u=new Object;return o.value.forEach(v=>{var w;const j=((w=i.value.find(P=>P.id===v.coreId))==null?void 0:w.name)||"未知";u.hasOwnProperty(j)||(u[j]={total:0,owe:0}),u[j].total+=v.count,v.check||(u[j].owe+=v.count)}),u}),$=async()=>{l.start(),c.value=!0;const u=await F("get",{params:{type:"log",uid:a.getId}});l.finish(),c.value=!1;const{data:v,success:j}=u.data;if(!j){s.error(v);return}o.value=v.log,i.value=v.user},x=async u=>{l.start(),c.value=!0;const v=await F("post",{data:{type:"checkLog",uid:a.getId,index:u}});l.finish();const{data:j,success:w}=v.data;if(!w){s.error(j),c.value=!1;return}$()};return te(()=>{$()}),(u,v)=>{const j=ks,w=rt,P=it,M=he,E=De,Q=Pe,K=bs,ee=le;return d(),h(ee,{show:n(c)},{default:t(()=>[e(P,{type:"line",animated:""},{default:t(()=>[e(w,{name:"社員名冊",tab:"社員名冊"},{default:t(()=>[e(P,{type:"line",animated:""},{default:t(()=>[e(w,{name:"社員",tab:`社員 (${n(g).projectMember.length}人)`},{default:t(()=>[e(j,{userData:n(g).projectMember},null,8,["userData"])]),_:1},8,["tab"]),e(w,{name:"會員",tab:`會員 (${n(g).member.length}人)`},{default:t(()=>[e(j,{userData:n(g).member},null,8,["userData"])]),_:1},8,["tab"]),e(w,{name:"沒繳錢的社員",tab:`沒繳錢的社員 (${n(g).projectMemberMailList.length}人)`},{default:t(()=>[e(j,{userData:n(g).projectMemberMailList},null,8,["userData"])]),_:1},8,["tab"]),e(w,{name:"潛在會員",tab:`潛在會員 (${n(g).memberMailList.length}人)`},{default:t(()=>[e(j,{userData:n(g).memberMailList},null,8,["userData"])]),_:1},8,["tab"])]),_:1})]),_:1}),e(w,{name:"社費紀錄",tab:"社費紀錄"},{default:t(()=>[e(P,{type:"line",animated:""},{default:t(()=>[e(w,{name:"Log",tab:"Log"},{default:t(()=>[e(M,{columns:p,data:n(o),pagination:f},null,8,["data"])]),_:1}),e(w,{name:"社費概述",tab:"社費概述"},{default:t(()=>[e(Q,{class:"p-2 rounded-md"},{default:t(()=>[(d(!0),k(I,null,O(Object.keys(n(b)),T=>(d(),h(E,null,{suffix:t(()=>[r("span",null,C(n(b)[T].owe)+" / "+C(n(b)[T].total),1)]),default:t(()=>[y(C(T)+" ",1)]),_:2},1024))),256))]),_:1})]),_:1})]),_:1})]),_:1}),e(w,{name:"社課簽到",tab:"社課簽到"},{default:t(()=>[e(P,{type:"line",animated:""},{default:t(()=>[(d(),k(I,null,O(m,T=>e(w,{name:T,tab:T},{default:t(()=>[e(K,{userData:n(i),filterClass:T},null,8,["userData","filterClass"])]),_:2},1032,["name","tab"])),64))]),_:1})]),_:1})]),_:1})]),_:1},8,["show"])}}});const ws={class:"flex flex-col gap-2"},Cs={class:"flex items-center gap-2"},Ls={class:"flex flex-wrap items-center gap-2"},Ds=r("span",null,"Leader:",-1),Ps=["href"],Is=r("br",null,null,-1),Ms={class:"flex flex-wrap items-center gap-2"},Ss=r("span",null,"Members:",-1),Us=["href"],Rs=D({__name:"Projects",setup(_){G();const s=V(),l=X(),c=L(!1),a=R(),o=L([]),i=async()=>{l.start(),c.value=!0;const p=await F("get",{params:{type:"projectsByCore",uid:a.getId}});l.finish(),c.value=!1;const{data:m,success:f}=p.data;if(!f){s.error(m);return}o.value=m};return te(()=>{i()}),(p,m)=>{const f=se,g=_t,b=dt,$=le;return d(),h($,{show:n(c)},{default:t(()=>[e(b,{"display-directive":"show"},{default:t(()=>[(d(!0),k(I,null,O(n(o),x=>(d(),h(g,{title:x.name,name:x.id},{"header-extra":t(()=>[y(C(x.leader.name),1)]),default:t(()=>[r("div",ws,[r("span",Cs,[y(C(x.description)+" ",1),e(n(U),{text:"",tag:"a",href:x.link,target:"_blank"},{default:t(()=>[e(n($e),{class:"text-xl",icon:"material-symbols:link"})]),_:2},1032,["href"])]),r("span",null,"Mentor: "+C(x.mentorType||"無")+" / "+C(x.mentorName||"無"),1)]),e(f),r("div",Ls,[Ds,r("a",{href:`/payment?id=${x.leader.id}`,target:"_blanks"},[e(n(U),{type:"info"},{default:t(()=>[y(C(x.leader.name),1)]),_:2},1024)],8,Ps)]),Is,r("div",Ms,[Ss,(d(!0),k(I,null,O(x.members,u=>(d(),k("a",{href:`/payment?id=${u.id}`,target:"_blanks"},[e(n(U),{type:"primary"},{default:t(()=>[y(C(u.name),1)]),_:2},1024)],8,Us))),256))])]),_:2},1032,["title","name"]))),256))]),_:1})]),_:1},8,["show"])}}}),Hs={};function As(_,s){const l=U,c=B("RouterLink"),a=fe,o=q;return d(),h(o,{class:"h-full",align:"center",justify:"center"},{default:t(()=>[e(a,{status:"404",title:"404 Not Found",description:"You know life is always ridiculous."},{footer:t(()=>[e(c,{to:"/"},{default:t(()=>[e(l,null,{default:t(()=>[y("Back Home")]),_:1})]),_:1})]),_:1})]),_:1})}const Fs=N(Hs,[["render",As]]),Bs=D({__name:"Download",props:{url:{type:String,default:""},name:{type:String,default:""},disabled:{type:Boolean,default:!0}},setup(_){const s=_,l=()=>{const c=document.createElement("a");c.href=s.url,c.download=s.name,c.click()};return(c,a)=>{const o=U;return d(),h(o,{onClick:l,disabled:_.disabled},{default:t(()=>[y("下載")]),_:1},8,["disabled"])}}}),Es=[{fileId:"39428f99-d0fb-4951-8448-d45f0f2e07de",noteId:"20230308"},{fileId:"ff2d5fd4-2cbb-4d68-bf52-d23e5a8a9f2c",noteId:"20230315"},{fileId:"af55d193-b8ed-4861-acdb-4b98fdb264a2",noteId:"20230322"}],zs={class:"flex justify-between"},Os={class:"flex gap-2 items-center"},qs=D({__name:"Records",setup(_){return(s,l)=>{const c=B("Icon"),a=Bs,o=Y,i=q;return d(),h(i,{vertical:""},{default:t(()=>[(d(!0),k(I,null,O(n(Es),p=>(d(),h(o,null,{header:t(()=>[r("div",zs,[r("div",Os,[e(c,{icon:"mdi:file-document-edit"}),r("h2",null,C(p.noteId)+"社課筆記",1)]),e(a,{name:p.noteId+"社課筆記",url:"/files/notes/"+p.fileId+".pdf"},null,8,["name","url"])])]),_:2},1024))),256))]),_:1})}}}),Vs=[{name:"Line企業參訪報名",url:"https://docs.google.com/forms/d/e/1FAIpQLSfdIOSBmrhPKUzIgjM_OVuXAxCqd_dTepl8mb3y_3i7cdemiA/viewform?usp=sharing"}],Ns={class:"flex justify-between"},Ts={class:"flex gap-2 items-center"},Gs=D({__name:"Forms",setup(_){return(s,l)=>{const c=B("Icon"),a=U,o=Y,i=q;return d(),h(i,{vertical:""},{default:t(()=>[(d(!0),k(I,null,O(n(Vs),p=>(d(),h(o,null,{header:t(()=>[r("div",Ns,[r("div",Ts,[e(c,{icon:"mdi:file-document-edit"}),r("h2",null,C(p.name),1)]),e(a,{text:"",tag:"a",target:"blank",href:p.url},{default:t(()=>[y("前往")]),_:2},1032,["href"])])]),_:2},1024))),256))]),_:1})}}}),Ys=D({__name:"Discord",setup(_){const s=G(),l=W(),c=R(),a=X(),o=V(),i=S(()=>s.query.code);return te(async()=>{try{a.start(),await c.discordLogin(i.value),a.finish(),o.success("綁定成功"),l.push({name:"Link Discord"})}catch(p){a.finish(),o.error(p.message),l.push({name:"Link Discord"})}}),(p,m)=>"正在綁定你的discord，請不要離開此頁"}}),Zs=[{path:"/",name:"Home",component:Mn,meta:{breadCrumb:[{text:"Home"}]}},{path:"/link-discord",name:"Link Discord",component:zn,meta:{breadCrumb:[{text:"Home",to:{name:"Home"}},{text:"Link Discord"}]}},{path:"/user",name:"User",component:Qn,meta:{breadCrumb:[{text:"Home",to:{name:"Home"}},{text:"User"}]}},{path:"/projects",children:[{path:"",name:"My Projects",component:vo,meta:{breadCrumb:[{text:"Home",to:{name:"Home"}},{text:"My Projects"}]}},{path:"create",name:"Create Project",component:wo,meta:{breadCrumb:[{text:"Home",to:{name:"Home"}},{text:"My Projects",to:{name:"My Projects"}},{text:"Create Project"}]}},{path:"enter",name:"Enter Project",component:Mo,meta:{breadCrumb:[{text:"Home",to:{name:"Home"}},{text:"My Projects",to:{name:"My Projects"}},{text:"Enter Project"}]}},{path:"edit",name:"Edit Project",component:qo,meta:{breadCrumb:[{text:"Home",to:{name:"Home"}},{text:"My Projects",to:{name:"My Projects"}},{text:"Edit Project"}]}}]},{path:"/records",name:"Records",component:qs,meta:{breadCrumb:[{text:"Home",to:{name:"Home"}},{text:"Records"}]}},{path:"/forms",name:"Forms",component:Gs,meta:{breadCrumb:[{text:"Home",to:{name:"Home"}},{text:"Forms"}]}},{path:"/admin",children:[{path:"",name:"Admin",component:Qo,meta:{breadCrumb:[{text:"Admin"}]}},{path:"log",name:"Log",component:js,meta:{breadCrumb:[{text:"Admin",to:{name:"Admin"}},{text:"Log"}]}},{path:"projects",name:"AdminProjects",component:Rs,meta:{breadCrumb:[{text:"Admin",to:{name:"Admin"}},{text:"Projects"}]}}]},{path:"/login",name:"Login",component:Go},{path:"/payment",name:"Payment",component:ys},{path:"/checkin",name:"Checkin",component:$s},{path:"/auth/callback",children:[{path:"discord",component:Ys}]},{path:"/:pathMatch(.*)*",name:"NotFound",component:Fs}],Ue=ze({history:Oe(),routes:Zs});Ue.beforeEach(_=>{const s=R();if(!s.credential&&_.name!=="Login")return{name:"Login"};if(s.credential&&_.name==="Login")return{name:"Home"}});const Qs=qe(),ce=Ve(yt);Ne.install({}.VITE_GA_TAG);ce.use(Te,{clientId:"1074271718336-6bd2eece404794eqmtpptar29v2u7kg9.apps.googleusercontent.com"});ce.use(Ue);ce.use(Qs);ce.component(xe.name,xe);ce.mount("#app");
