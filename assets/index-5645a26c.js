import{d as I,as as V,at as A,au as d,av as v,aw as t,ax as j,F as M,ay as T,az as n,c as x,aA as k,aB as _e,aC as Me,aD as re,aE as J,aF as i,aG as e,aH as E,aI as Se,aJ as Re,aK as Ue,r as w,n as S,aL as F,ao as He,o as ee,aM as Ee,z as Be,aN as Fe,aO as Ae,aP as ze,aQ as qe,aR as Ne,aS as ye}from"./vendor-082d2307.js";import{_ as Oe,a as Ve,b as xe,c as H,d as Ge,e as le,f as Te,g as Ye,h as Ze,i as Qe,j as Je,N as Ke,k as de,l as te,m as ae,n as K,o as G,p as ue,u as N,q as X,r as $e,s as be,t as ne,v as Xe,w as pe,x as We,y as et,z as tt,A as nt,B as je,C as me,D as ke,E as ot,F as he,G as st,H as we,I as Ce,J as at,K as ct,L as lt,M as rt,O as it,P as _t,Q as dt}from"./naive-92be2620.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))c(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const _ of o.addedNodes)_.tagName==="LINK"&&_.rel==="modulepreload"&&c(_)}).observe(document,{childList:!0,subtree:!0});function l(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerpolicy&&(o.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?o.credentials="include":a.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function c(a){if(a.ep)return;a.ep=!0;const o=l(a);fetch(a.href,o)}})();const ut=I({__name:"BreadCrumb",setup(u){const s=V();return(l,c)=>{const a=A("RouterLink"),o=Oe,_=Ve;return d(),v(_,{separator:">",class:"p-5 pb-0"},{default:t(()=>[(d(!0),j(M,null,T(n(s).meta.breadCrumb,m=>(d(),v(o,null,{default:t(()=>[m.to?(d(),v(a,{key:0,to:m.to},{default:t(()=>[x(k(m.text),1)]),_:2},1032,["to"])):(d(),j(M,{key:1},[x(k(m.text),1)],64))]),_:2},1024))),256))]),_:1})}}}),ie="/assets/Logo-891bf623.png";_e.defaults.headers.post["Content-Type"]="text/plain";_e.defaults.headers.get["Content-Type"]="text/plain";const pt=async(u,s,l,c)=>{if(c!==void 0)var{params:a={},data:o={}}=c;else a=o=null;const _={url:u,method:s,params:a,data:o,baseURL:l,timeout:0,...c};return _e(_).then(m=>m).catch(m=>{throw m})},B=(u,s)=>pt("https://script.google.com/macros/s/AKfycbz5yy16qcmsnjohxVQ17l9qovgMjYvIUdRX_qPhb47z2aXSLMz07WRNhE22rLcbTwBk/exec",u,"",{...s}),R=Me("user",{state:()=>({credential:localStorage.getItem("credential"),googleData:null,discordData:null,userData:null,createdProjects:null,joinedProjects:null,paid:0,appReady:!1,isCore:!1,isFullYear:!1,isLastSemester:!1}),getters:{getAvatar(u){var s;return(s=u.googleData)==null?void 0:s.picture},getId(u){var s;return(s=u.googleData)==null?void 0:s.sub},getEmail(u){var s;return(s=u.googleData)==null?void 0:s.email},isGoogleReady(u){return u.googleData!==null},isAppReady(u){return u.appReady},isUserCompleted(u){var s,l;return((s=u.userData)==null?void 0:s.name)!==""&&((l=u.userData)==null?void 0:l.phone)!==""},isDiscordConnected(u){return u.discordData!==null}},actions:{async googleLogin(u){if(u){const s=re(u);if(s.exp*1e3<new Date().getTime())this.googleLogout();else{localStorage.setItem("credential",u),this.googleData=s,this.credential=u;const l=await B("post",{data:{type:"google",uid:s.sub,email:s.email}}),{data:c,success:a}=l.data;if(!a)throw new Error(c);this.userData=c.user,this.discordData=c.discord,this.createdProjects=c.createdProjects,this.joinedProjects=c.joinedProjects,this.paid=c.paidCount}}else if(this.credential){const s=re(this.credential);if(s.exp*1e3<new Date().getTime())this.googleLogout();else{this.googleData=s;const l=await B("get",{params:{uid:s.sub}}),{data:c,success:a}=l.data;if(!a)throw new Error(c);this.userData=c.user,this.discordData=c.discord,this.createdProjects=c.createdProjects,this.joinedProjects=c.joinedProjects,this.paid=c.paidCount,this.isCore=c.isCore,this.isLastSemester=c.isLastSemester,this.isFullYear=c.isFullYear}}else this.googleData={};this.appReady=!0},async discordLogin(u){const s=await B("post",{data:{type:"discord",uid:this.getId,code:u}}),{data:l,success:c}=s.data;if(!c)throw new Error(l);this.discordData=l},async discordReset(u){const s=await B("post",{data:{uid:this.getId,type:"discord",code:u,reset:!0}}),{data:l,success:c}=s.data;if(!c)throw new Error(l);this.discordData=null},async userUpdate(u){const s=await B("post",{data:{uid:this.getId,type:"user",name:u.name,phone:u.phone,inSchool:u.inSchool,dept:u.inSchool?u.dept:null,studentId:u.inSchool?u.studentId:null}}),{data:l,success:c}=s.data;if(!c)throw new Error(l);this.userData=l},async joinProject(u,s){const l=await B("post",{data:{uid:this.getId,type:"joinProject",id:u,authCode:s}}),{data:c,success:a}=l.data;if(!a)throw new Error(c);this.joinedProjects=c},async createProject(u,s,l){const c=await B("post",{data:{uid:this.getId,type:"createProject",name:u,description:s,link:l}}),{data:a,success:o}=c.data;if(!o)throw new Error(a);this.createdProjects=[...this.createdProjects,a]},async editProject(u,s,l,c,a,o){const _=await B("post",{data:{uid:this.getId,type:"editProject",name:u,description:s,id:c,link:l,mentorType:a,mentorName:o}}),{data:m,success:h}=_.data;if(!h)throw new Error(m);this.createdProjects=this.createdProjects.map(p=>p.id===m.id?{...p,...m}:p)},googleLogout(){localStorage.removeItem("credential"),this.credential=null,this.googleData={},this.discordData=null,this.userData=null}}}),mt={class:"flex w-full items-center justify-between"},ht=i("h2",{class:"text-xl"},"GDSC Member",-1),ft={key:0,class:"flex items-center gap-2"},gt=I({__name:"PageHeader",setup(u){const s=R(),l=J(),c=()=>{s.googleLogout(),l.push({name:"Login"})};return(a,o)=>{const _=xe,m=A("RouterLink"),h=H,p=Ge;return d(),v(p,{class:"h-18 p-5",bordered:""},{default:t(()=>[i("div",mt,[e(m,{to:{name:"Home"},tag:"div",class:"flex items-center gap-2"},{default:t(()=>[e(_,{src:n(ie),color:"."},null,8,["src"]),ht]),_:1}),n(s).credential?(d(),j("div",ft,[e(h,{size:"medium",onClick:c},{default:t(()=>[x("登出")]),_:1}),e(_,{round:"",src:n(s).getAvatar,"fallback-src":n(ie)},null,8,["src","fallback-src"])])):E("",!0)])]),_:1})}}}),vt=I({__name:"Index",async setup(u){let s,l;const c=R(),a=V();return a.name!=="Login"&&([s,l]=Se(()=>c.googleLogin()),await s,l()),(o,_)=>{const m=gt,h=ut,p=A("RouterView"),y=le;return d(),v(y,{show:!n(c).isAppReady,class:"h-full"},{default:t(()=>[n(a).name!=="Login"?(d(),v(m,{key:0})):E("",!0),n(c).isAppReady&&n(a).name!=="Login"?(d(),v(h,{key:1})):E("",!0),i("div",{class:Re(["p-5",{"h-full":n(a).name==="Login"}])},[e(p)],2)]),_:1},8,["show"])}}});const yt=I({__name:"App",setup(u){return(s,l)=>{const c=le,a=Ze,o=Qe,_=Je,m=Ye;return d(),v(m,{theme:n(Te),class:"h-full w-full"},{default:t(()=>[e(o,null,{default:t(()=>[e(a,null,{default:t(()=>[(d(),v(Ue,null,{fallback:t(()=>[e(c,{loading:"",class:"h-full w-full"})]),default:t(()=>[e(vt)]),_:1}))]),_:1})]),_:1}),e(_)]),_:1},8,["theme"])}}}),xt={name:"MdiQrcode"},O=(u,s)=>{const l=u.__vccOpts||u;for(const[c,a]of s)l[c]=a;return l},$t={width:"1em",height:"1em",viewBox:"0 0 24 24"},bt=i("path",{fill:"currentColor",d:"M3 11h2v2H3v-2m8-6h2v4h-2V5m-2 6h4v4h-2v-2H9v-2m6 0h2v2h2v-2h2v2h-2v2h2v4h-2v2h-2v-2h-4v2h-2v-4h4v-2h2v-2h-2v-2m4 8v-4h-2v4h2M15 3h6v6h-6V3m2 2v2h2V5h-2M3 3h6v6H3V3m2 2v2h2V5H5M3 15h6v6H3v-6m2 2v2h2v-2H5Z"},null,-1),jt=[bt];function kt(u,s,l,c,a,o){return d(),j("svg",$t,jt)}const wt=O(xt,[["render",kt]]),U={社員:700,會員:500},Ct={class:"flex items-center justify-between"},Lt=i("h2",null,"收據",-1),Pt={class:"grid grid-cols-3"},Dt=I({__name:"Receipt",setup(u){const s=R(),l=w(!1),c=S(()=>s.joinedProjects.length>0||s.createdProjects.length>0?{type:"社員",count:U.社員+(s.isLastSemester?-200:0)}:s.paid>=U.會員?{type:"會員",count:U.會員+(s.isLastSemester?-200:0)}:{type:"Insider",count:0}),a=S(()=>`https://member.andyjjrt.cc/payment?id=${s.getId}`);return(o,_)=>{const m=wt,h=Ke,p=H,y=de,$=te,b=ae,r=K,f=A("vue-qrcode"),g=G,C=ue;return d(),j(M,null,[e(r,null,{header:t(()=>[i("div",Ct,[Lt,e(p,{text:"",onClick:_[0]||(_[0]=L=>l.value=!0),"icon-placement":"right"},{icon:t(()=>[e(h,{class:"text-xl"},{default:t(()=>[e(m)]),_:1})]),default:t(()=>[x(" 繳費 ")]),_:1})])]),default:t(()=>[i("div",Pt,[e(y,{label:"當前身分"},{default:t(()=>[x(k(n(c).type),1)]),_:1}),e(y,{label:"應繳金額"},{default:t(()=>[x(k(n(c).count),1)]),_:1}),e(y,{label:"已繳金額"},{default:t(()=>[x(k(n(s).paid),1)]),_:1})]),n(s).isCore?(d(),j(M,{key:0},[e($),e(b,{title:"你是core",type:"success"})],64)):(d(),j(M,{key:1},[n(c).count<n(s).paid?(d(),j(M,{key:0},[e($),e(b,{title:"您繳的社費大於應繳金額，請找幹部領取退款",type:"info"})],64)):n(c).count>n(s).paid?(d(),j(M,{key:1},[e($),e(b,{title:"您的社費尚未繳齊，請找幹部補繳",type:"error"})],64)):(d(),j(M,{key:2},[],64)),n(s).isFullYear?(d(),j(M,{key:3},[e($),e(b,{title:"上學期已繳交社費",type:"success"})],64)):E("",!0)],64))]),_:1}),e(C,{show:n(l),"onUpdate:show":_[1]||(_[1]=L=>F(l)?l.value=L:null),"transform-origin":"center"},{default:t(()=>[e(r,{class:"max-w-xs rounded-2xl",title:"繳費",bordered:!1,role:"dialog","aria-modal":"true"},{default:t(()=>[e(g,{vertical:""},{default:t(()=>[e(g,{justify:"center"},{default:t(()=>[e(f,{value:n(a)},null,8,["value"])]),_:1}),e($),e(b,{title:"請出示此QRcode給幹部",type:"info"})]),_:1})]),_:1})]),_:1},8,["show"])],64)}}}),It={name:"Fa6SolidUserPlus"},Mt={width:"1.25em",height:"1em",viewBox:"0 0 640 512"},St=i("path",{fill:"currentColor",d:"M352 128c0 70.7-57.3 128-128 128S96 198.7 96 128S153.3 0 224 0s128 57.3 128 128zM0 482.3C0 383.8 79.8 304 178.3 304h91.4c98.5 0 178.3 79.8 178.3 178.3c0 16.4-13.3 29.7-29.7 29.7H29.7C13.3 512 0 498.7 0 482.3zM504 312v-64h-64c-13.3 0-24-10.7-24-24s10.7-24 24-24h64v-64c0-13.3 10.7-24 24-24s24 10.7 24 24v64h64c13.3 0 24 10.7 24 24s-10.7 24-24 24h-64v64c0 13.3-10.7 24-24 24s-24-10.7-24-24z"},null,-1),Rt=[St];function Ut(u,s,l,c,a,o){return d(),j("svg",Mt,Rt)}const Ht=O(It,[["render",Ut]]),Et={name:"Fa6SolidUser"},Bt={width:"0.88em",height:"1em",viewBox:"0 0 448 512"},Ft=i("path",{fill:"currentColor",d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0S96 57.3 96 128s57.3 128 128 128zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512h388.6c16.4 0 29.7-13.3 29.7-29.7c0-98.5-79.8-178.3-178.3-178.3h-91.4z"},null,-1),At=[Ft];function zt(u,s,l,c,a,o){return d(),j("svg",Bt,At)}const qt=O(Et,[["render",zt]]),Nt={name:"MdiCheckCircle"},Ot={width:"1em",height:"1em",viewBox:"0 0 24 24"},Vt=i("path",{fill:"currentColor",d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10s10-4.5 10-10S17.5 2 12 2m-2 15l-5-5l1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9Z"},null,-1),Gt=[Vt];function Tt(u,s,l,c,a,o){return d(),j("svg",Ot,Gt)}const Le=O(Nt,[["render",Tt]]),Yt={name:"LogosDiscordIcon"},Zt={width:"1.29em",height:"1em",viewBox:"0 0 256 199"},Qt=i("path",{fill:"#5865F2",d:"M216.856 16.597A208.502 208.502 0 0 0 164.042 0c-2.275 4.113-4.933 9.645-6.766 14.046c-19.692-2.961-39.203-2.961-58.533 0c-1.832-4.4-4.55-9.933-6.846-14.046a207.809 207.809 0 0 0-52.855 16.638C5.618 67.147-3.443 116.4 1.087 164.956c22.169 16.555 43.653 26.612 64.775 33.193A161.094 161.094 0 0 0 79.735 175.3a136.413 136.413 0 0 1-21.846-10.632a108.636 108.636 0 0 0 5.356-4.237c42.122 19.702 87.89 19.702 129.51 0a131.66 131.66 0 0 0 5.355 4.237a136.07 136.07 0 0 1-21.886 10.653c4.006 8.02 8.638 15.67 13.873 22.848c21.142-6.58 42.646-16.637 64.815-33.213c5.316-56.288-9.08-105.09-38.056-148.36ZM85.474 135.095c-12.645 0-23.015-11.805-23.015-26.18s10.149-26.2 23.015-26.2c12.867 0 23.236 11.804 23.015 26.2c.02 14.375-10.148 26.18-23.015 26.18Zm85.051 0c-12.645 0-23.014-11.805-23.014-26.18s10.148-26.2 23.014-26.2c12.867 0 23.236 11.804 23.015 26.2c0 14.375-10.148 26.18-23.015 26.18Z"},null,-1),Jt=[Qt];function Kt(u,s,l,c,a,o){return d(),j("svg",Zt,Jt)}const Pe=O(Yt,[["render",Kt]]),Xt={name:"CheckinIcon"},Wt={width:"1em",height:"1em",viewBox:"0 0 24 24"},en=i("path",{fill:"currentColor",d:"M20 2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-8.24 11.28L9.69 11.2c-.38-.39-.38-1.01 0-1.4a.996.996 0 0 1 1.41 0l1.36 1.37l4.42-4.46a.996.996 0 0 1 1.41 0c.38.39.38 1.01 0 1.4l-5.13 5.17c-.37.4-1.01.4-1.4 0zM3 6c-.55 0-1 .45-1 1v13c0 1.1.9 2 2 2h13c.55 0 1-.45 1-1s-.45-1-1-1H5c-.55 0-1-.45-1-1V7c0-.55-.45-1-1-1z"},null,-1),tn=[en];function nn(u,s,l,c,a,o){return d(),j("svg",Wt,tn)}const on=O(Xt,[["render",nn]]),sn={class:"flex justify-between"},an={class:"flex gap-2 items-center"},cn=i("h2",null,"社課簽到",-1),ln={class:"flex justify-between"},rn={class:"flex gap-2 items-center"},_n=i("h2",null,"Discord綁定",-1),dn={class:"flex items-center text-green-600 text-2xl"},un={class:"flex justify-between"},pn={class:"flex gap-2 items-center"},mn=i("h2",null,"個人資料",-1),hn={class:"flex items-center text-green-600 text-2xl"},fn={class:"flex justify-between"},gn={class:"flex gap-2 items-center"},vn=i("h2",null,"我的專案",-1),yn=I({__name:"Index",setup(u){const s=R(),l=w(!1),c=S(()=>`https://member.andyjjrt.cc/checkin?id=${s.getId}`);return(a,o)=>{const _=on,m=K,h=te,p=Pe,y=Le,$=A("RouterLink"),b=qt,r=Ht,f=Dt,g=G,C=A("vue-qrcode"),L=ae,P=ue;return d(),j(M,null,[e(g,{vertical:""},{default:t(()=>[e(m,{onClick:o[0]||(o[0]=D=>l.value=!0),class:"cursor-pointer"},{header:t(()=>[i("div",sn,[i("div",an,[e(_),cn])])]),_:1}),e(h),e($,{to:"/link-discord"},{default:t(()=>[e(m,null,{header:t(()=>[i("div",ln,[i("div",rn,[e(p),_n]),i("span",dn,[n(s).isDiscordConnected?(d(),v(y,{key:0})):E("",!0)])])]),_:1})]),_:1}),e($,{to:"/user"},{default:t(()=>[e(m,null,{header:t(()=>[i("div",un,[i("div",pn,[e(b),mn]),i("span",hn,[n(s).isUserCompleted?(d(),v(y,{key:0})):E("",!0)])])]),_:1})]),_:1}),e($,{to:"/projects"},{default:t(()=>[e(m,null,{header:t(()=>[i("div",fn,[i("div",gn,[e(r),vn])])]),_:1})]),_:1}),e(h),e(f)]),_:1}),e(P,{show:n(l),"onUpdate:show":o[1]||(o[1]=D=>F(l)?l.value=D:null),"transform-origin":"center"},{default:t(()=>[e(m,{class:"max-w-xs rounded-2xl",title:"社課簽到",bordered:!1,role:"dialog","aria-modal":"true"},{default:t(()=>[e(g,{vertical:""},{default:t(()=>[e(g,{justify:"center"},{default:t(()=>[e(C,{value:n(c)},null,8,["value"])]),_:1}),e(h),e(L,{title:"請出示此QRcode給幹部",type:"info"})]),_:1})]),_:1})]),_:1},8,["show"])],64)}}}),xn=["href"],$n=I({__name:"LoginButton",setup(u){const s=S(()=>"https://discord.com/api/oauth2/authorize?client_id=1069510883719520266&redirect_uri=https%3A%2F%2Fmember.andyjjrt.cc%2Fauth%2Fcallback%2Fdiscord&response_type=code&scope=identify%20email");return(l,c)=>{const a=Pe,o=H;return d(),j("a",{href:n(s)},[e(o,null,{icon:t(()=>[e(a)]),default:t(()=>[x(" 綁定Discord ")]),_:1})],8,xn)}}}),bn={class:"flex justify-between items-center mt-[-10px]"},jn={class:"relative pb-12"},kn=["src"],wn=["src"],De=I({__name:"Profile",props:{discordData:{type:Object,default:()=>{}},readOnly:{type:Boolean,default:!1}},setup(u){const s=u,l=R(),c=w(!1),a=async()=>{var h;c.value=!0,await l.discordReset((h=s.discordData)==null?void 0:h.id),c.value=!1},o=S(()=>{var h,p;return s.discordData.banner?`https://cdn.discordapp.com/banners/${(h=s.discordData)==null?void 0:h.id}/${(p=s.discordData)==null?void 0:p.banner}?size=512`:s.discordData.banner_color?`https://singlecolorimage.com/get/${s.discordData.banner_color.split("#")[1]}/512x175`:"https://singlecolorimage.com/get/ffffff/512x175"}),_=S(()=>{var h,p;return s.discordData.avatar?`https://cdn.discordapp.com/avatars/${(h=s.discordData)==null?void 0:h.id}/${(p=s.discordData)==null?void 0:p.avatar}?size=128`:`https://cdn.discordapp.com/embed/avatars/${s.discordData.discriminator%5}.png`}),m=S(()=>{var h,p;return`${(h=s.discordData)==null?void 0:h.username}#${(p=s.discordData)==null?void 0:p.discriminator}`});return(h,p)=>{const y=H,$=K;return d(),v($,{class:"max-w-[400px]"},{header:t(()=>[i("div",bn,[i("h1",null,k(n(m)),1),u.readOnly?E("",!0):(d(),v(y,{key:0,onClick:a,loading:n(c)},{default:t(()=>[x(" 取消綁定 ")]),_:1},8,["loading"]))])]),cover:t(()=>[i("div",jn,[i("img",{src:n(o)},null,8,kn),i("img",{src:n(_),class:"rounded-full absolute left-0 bottom-0 !w-28 border-8 ml-3",style:{"border-color":"var(--n-color)"}},null,8,wn)])]),_:1})}}}),Cn=i("h2",{class:"text-2xl text-center mb-4"},"Join our discord",-1),Ln=i("iframe",{src:"https://discord.com/widget?id=902904317986607165&theme=dark",width:"100%",height:"500",allowtransparency:"true",frameborder:"0",sandbox:"allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts"},null,-1),Pn=I({__name:"LinkDiscord",setup(u){const s=R();return(l,c)=>{const a=De,o=$n,_=te;return d(),j(M,null,[n(s).discordData?(d(),v(a,{key:0,discordData:n(s).discordData},null,8,["discordData"])):(d(),v(o,{key:1})),e(_),Cn,Ln],64)}}}),Dn={class:"flex flex-col gap-1"},In=i("span",null,"姓名",-1),Mn={class:"flex flex-col gap-1"},Sn=i("span",null,"手機",-1),Rn={class:"flex flex-col gap-1"},Un=i("span",null,"學號",-1),Hn={class:"flex flex-col gap-1"},En=i("span",null,"系級",-1),Bn=I({__name:"User",setup(u){const s=N(),l=X(),c=R(),a=He({...c.userData}),o=w(!1),_=(h,p)=>new RegExp(h).test(p),m=async()=>{if(a.phone===""||a.name===""||a.inSchool&&(a.dept===""||a.studentId==="")){s.error("欄位不得為空");return}if(!_("^09[0-9]{8}$",a.phone)){s.error("手機號碼錯誤");return}if(a.inSchool&&!_("^1(0[6-9]|1[0-2])(([1-7])(0|5|6)|ZU)[0-9]{4}$",a.studentId)){s.error("學號格式錯誤");return}o.value=!0,l.start();try{await c.userUpdate(a),a.value={...c.userData},s.success("儲存成功")}catch(h){s.error(h.message)}l.finish(),o.value=!1};return(h,p)=>{const y=$e,$=be,b=ne,r=G,f=Xe,g=H,C=pe;return d(),v(r,{vertical:""},{default:t(()=>[e($,{value:n(a).inSchool,"onUpdate:value":p[0]||(p[0]=L=>n(a).inSchool=L),name:"radiobuttongroup1",disabled:n(o)},{default:t(()=>[e(y,{value:!0,label:"政大學生"}),e(y,{value:!1,label:"政大校友/校外人士"})]),_:1},8,["value","disabled"]),i("div",Dn,[In,e(b,{placeholder:"姓名",value:n(a).name,"onUpdate:value":p[1]||(p[1]=L=>n(a).name=L),disabled:n(o)},null,8,["value","disabled"])]),i("div",Mn,[Sn,e(b,{placeholder:"手機",value:n(a).phone,"onUpdate:value":p[2]||(p[2]=L=>n(a).phone=L),disabled:n(o)},null,8,["value","disabled"])]),e(f,{show:n(a).inSchool},{default:t(()=>[e(r,{vertical:""},{default:t(()=>[i("div",Rn,[Un,e(b,{placeholder:"學號",value:n(a).studentId,"onUpdate:value":p[3]||(p[3]=L=>n(a).studentId=L),disabled:n(o)},null,8,["value","disabled"])]),i("div",Hn,[En,e(b,{placeholder:"系級",value:n(a).dept,"onUpdate:value":p[4]||(p[4]=L=>n(a).dept=L),disabled:n(o)},null,8,["value","disabled"])])]),_:1})]),_:1},8,["show"]),e(r,{align:"center",class:"mt-2"},{default:t(()=>[e(g,{onClick:m,loading:n(o),disabled:n(c).isUserCompleted},{default:t(()=>[x(" 儲存 ")]),_:1},8,["loading","disabled"]),n(c).isUserCompleted?(d(),v(C,{key:0,bordered:!1},{default:t(()=>[x("已經填寫完成，若要更改請洽幹部")]),_:1})):E("",!0)]),_:1})]),_:1})}}}),Fn={name:"MdiPencil"},An={width:"1em",height:"1em",viewBox:"0 0 24 24"},zn=i("path",{fill:"currentColor",d:"M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83l3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"},null,-1),qn=[zn];function Nn(u,s,l,c,a,o){return d(),j("svg",An,qn)}const On=O(Fn,[["render",Nn]]),Vn={name:"MdiShareVariant"},Gn={width:"1em",height:"1em",viewBox:"0 0 24 24"},Tn=i("path",{fill:"currentColor",d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7c0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3a3 3 0 0 0-3-3a3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3a3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66c0 1.61 1.31 2.91 2.92 2.91c1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"},null,-1),Yn=[Tn];function Zn(u,s,l,c,a,o){return d(),j("svg",Gn,Yn)}const Qn=O(Vn,[["render",Zn]]),Jn={class:"flex justify-between"},Kn={class:"flex items-center gap-1"},Xn=I({__name:"HostProjectCard",props:{project:{type:Object,default:()=>{}}},setup(u){const s=u,l=N(),c=S(()=>"https://member.andyjjrt.cc/projects/enter?id="+s.project.id),a=()=>{navigator.clipboard.writeText(c.value),l.success("已複製到剪貼簿")},o=S(()=>s.project.members.map(m=>({key:m,label:m}))),_=w(!1);return(m,h)=>{const p=We,y=pe,$=xe,b=et,r=tt,f=nt,g=Qn,C=H,L=On,P=A("RouterLink"),D=G,z=K,Y=A("vue-qrcode"),Z=ne,W=je,oe=ue;return d(),j(M,null,[e(z,null,{header:t(()=>[i("div",Jn,[i("h2",null,k(u.project.name),1),i("div",Kn,[e(y,{bordered:!1,type:"info"},{default:t(()=>[e(p,{from:0,to:u.project.authCode,active:""},null,8,["to"])]),_:1})])])]),default:t(()=>[x(" "+k(u.project.description)+" ",1),e(D,{justify:"space-between",align:"center"},{default:t(()=>[e(f,{options:n(o),size:20,max:3,class:"mt-2"},{avatar:t(({option:{label:q,key:se}})=>[e(b,null,{trigger:t(()=>[e($,{size:"small"},{default:t(()=>[x(k(se[0]),1)]),_:2},1024)]),default:t(()=>[x(" "+k(q),1)]),_:2},1024)]),rest:t(({options:q,rest:se})=>[e(r,{options:q,placement:"top"},{default:t(()=>[e($,{size:"small"},{default:t(()=>[x("+"+k(se),1)]),_:2},1024)]),_:2},1032,["options"])]),_:1},8,["options"]),e(D,null,{default:t(()=>[e(C,{text:"",onClick:h[0]||(h[0]=q=>_.value=!0)},{default:t(()=>[e(g)]),_:1}),e(P,{to:{name:"Edit Project",query:{id:u.project.id}}},{default:t(()=>[e(C,{text:""},{default:t(()=>[e(L)]),_:1})]),_:1},8,["to"])]),_:1})]),_:1})]),_:1}),e(oe,{show:n(_),"onUpdate:show":h[1]||(h[1]=q=>F(_)?_.value=q:null),"transform-origin":"center"},{default:t(()=>[e(z,{class:"max-w-xs rounded-2xl",title:"分享",bordered:!1,role:"dialog","aria-modal":"true"},{default:t(()=>[e(D,{vertical:""},{default:t(()=>[e(D,{justify:"center"},{default:t(()=>[e(Y,{value:n(c)},null,8,["value"])]),_:1}),e(W,null,{default:t(()=>[e(Z,{readonly:"","default-value":n(c)},null,8,["default-value"]),e(C,{type:"primary",ghost:"",onClick:a},{default:t(()=>[x(" 複製 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["show"])],64)}}}),Wn={class:"flex justify-between"},eo=i("h2",null,"我加入的專案",-1),to=i("br",null,null,-1),no=i("br",null,null,-1),oo={class:"flex justify-between"},so=i("h2",null,"我開啟的專案",-1),ao=I({__name:"MyProjects",setup(u){const s=R(),l=c=>{window.open(c)};return(c,a)=>{const o=H,_=A("RouterLink"),m=ke,h=K,p=me,y=G,$=Xn;return d(),v(y,{vertical:""},{default:t(()=>[e(h,null,{header:t(()=>[i("div",Wn,[eo,e(_,{to:{name:"Enter Project"}},{default:t(()=>[e(o,null,{default:t(()=>[x(" 加入專案 ")]),_:1})]),_:1})])]),default:t(()=>[e(y,{vertical:""},{default:t(()=>[(d(!0),j(M,null,T(n(s).joinedProjects,b=>(d(),v(h,{title:b.name},{default:t(()=>[x(k(b.description)+" ",1),to,e(m,{"negative-text":null,onPositiveClick:r=>l(b.link)},{trigger:t(()=>[e(o,{text:"",tag:"a",type:"primary"},{default:t(()=>[x("專案連結")]),_:1})]),default:t(()=>[x(" 即將前往: "+k(b.link),1),no,x(" 此網站由"+k(b.name)+"提供，請留意網路安全 ",1)]),_:2},1032,["onPositiveClick"])]),_:2},1032,["title"]))),256)),!n(s).joinedProjects||n(s).joinedProjects.length===0?(d(),v(p,{key:0,description:"尚無專案"})):E("",!0)]),_:1})]),_:1}),e(h,null,{header:t(()=>[i("div",oo,[so,e(_,{to:{name:"Create Project"}},{default:t(()=>[e(o,null,{default:t(()=>[x("新增專案")]),_:1})]),_:1})])]),default:t(()=>[e(y,{vertical:""},{default:t(()=>[(d(!0),j(M,null,T(n(s).createdProjects,b=>(d(),v($,{project:b},null,8,["project"]))),256)),!n(s).createdProjects||n(s).createdProjects.length===0?(d(),v(p,{key:0,description:"尚無專案"})):E("",!0)]),_:1})]),_:1})]),_:1})}}}),co={class:"flex flex-col gap-1"},lo=i("span",null,"專案名稱",-1),ro={class:"flex flex-col gap-1"},io=i("span",null,"專案敘述",-1),_o={class:"flex flex-col gap-1"},uo=i("span",null,"專案連結(ex: 投影片)",-1),po=I({__name:"CreateProject",setup(u){const s=R(),l=N(),c=J(),a=w(""),o=w(""),_=w(""),m=w(!1),h=async()=>{m.value=!0;try{await s.createProject(a.value,o.value,_.value),l.success("成功新增專案"),c.push({name:"My Projects"})}catch(p){l.error(p.message)}m.value=!1};return(p,y)=>{const $=ne,b=pe,r=H,f=G;return d(),v(f,{vertical:""},{default:t(()=>[i("div",co,[lo,e($,{placeholder:"專案名稱",value:n(a),"onUpdate:value":y[0]||(y[0]=g=>F(a)?a.value=g:null),disabled:n(m)},null,8,["value","disabled"])]),i("div",ro,[io,e($,{disabled:n(m),placeholder:"專案敘述",value:n(o),"onUpdate:value":y[1]||(y[1]=g=>F(o)?o.value=g:null),type:"textarea",maxlength:"30","show-count":""},null,8,["disabled","value"])]),i("div",_o,[uo,e($,{placeholder:"專案連結(ex: 投影片)",value:n(_),"onUpdate:value":y[2]||(y[2]=g=>F(_)?_.value=g:null),disabled:n(m)},null,8,["value","disabled"])]),e(f,{justify:"end",align:"center"},{default:t(()=>[!n(s).isDiscordConnected||!n(s).isUserCompleted?(d(),v(b,{key:0,bordered:!1},{default:t(()=>[x(" 請先填寫個人資料及綁定discord ")]),_:1})):E("",!0),e(r,{onClick:h,loading:n(m),disabled:!n(s).isDiscordConnected||!n(s).isUserCompleted},{default:t(()=>[x(" 新增專案 ")]),_:1},8,["loading","disabled"])]),_:1})]),_:1})}}}),mo={class:"flex justify-between items-center"},ho=i("div",null,"請先填寫個人資料及綁定discord",-1),fo=I({__name:"EnterProjectButton",props:{id:{type:String,default:""}},setup(u){const s=u,l=R(),c=N(),a=w(""),o=w(!1),_=S(()=>p=>l.joinedProjects.findIndex(y=>y.id===p)>=0),m=S(()=>p=>l.createdProjects.findIndex(y=>y.id===p)>=0),h=async()=>{o.value=!0;try{await l.joinProject(s.id,a.value),c.success("成功加入專案")}catch(p){c.error(p.message)}o.value=!1};return(p,y)=>{const $=ae,b=H,r=A("RouterLink"),f=ne,g=je;return n(m)(u.id)?(d(),v($,{key:0,title:"已是專案主持人",type:"info"})):n(_)(u.id)?(d(),v($,{key:1,title:"已經加入專案",type:"success"})):!n(l).isUserCompleted||!n(l).isDiscordConnected?(d(),v($,{key:2,type:"warning"},{header:t(()=>[i("div",mo,[ho,e(r,{to:"/"},{default:t(()=>[e(b,{type:"warning",size:"tiny"},{default:t(()=>[x("回到首頁")]),_:1})]),_:1})])]),_:1})):(d(),v(g,{key:3,class:"mt-2"},{default:t(()=>[e(f,{placeholder:"authCode",value:n(a),"onUpdate:value":y[0]||(y[0]=C=>F(a)?a.value=C:null),disabled:n(o)},null,8,["value","disabled"]),e(b,{type:"primary",ghost:"",loading:n(o),onClick:h},{default:t(()=>[x(" 加入 ")]),_:1},8,["loading"])]),_:1}))}}}),go={class:"w-full"},vo=i("br",null,null,-1),yo=I({__name:"EnterProject",setup(u){const s=N(),l=V();J();const c=R(),a=w([]),o=w(!0),_=S(()=>l.query.id||null),m=S(()=>_.value?[a.value.find(p=>p.id===_.value)].filter(p=>p!==void 0):a.value);ee(async()=>{const p=await B("get",{params:{type:"projects",uid:c.getId}});o.value=!1;const{data:y,success:$}=p.data;if(!$){s.error(y);return}a.value=y});const h=p=>{window.open(p)};return(p,y)=>{const $=ot,b=H,r=A("RouterLink"),f=me,g=ke,C=fo,L=G,P=K;return d(),v(P,{title:n(_)?"加入專案":"所有專案"},{default:t(()=>[e(L,{vertical:""},{default:t(()=>[n(o)?(d(),j(M,{key:0},[e($,{text:"",repeat:2}),x(),e($,{text:"",style:{width:"60%"}})],64)):n(m).length===0?(d(),v(f,{key:1,description:n(_)?"無此專案":"尚無專案"},Ee({_:2},[n(_)?{name:"extra",fn:t(()=>[e(r,{to:{name:"Enter Project"}},{default:t(()=>[e(b,{size:"small"},{default:t(()=>[x("瀏覽所有專案")]),_:1})]),_:1})]),key:"0"}:void 0]),1032,["description"])):(d(!0),j(M,{key:2},T(n(m),D=>(d(),v(P,{title:D.name},{"header-extra":t(()=>[x(k(D.leader),1)]),default:t(()=>[e(L,{vertical:""},{default:t(()=>[x(k(D.description)+" ",1),e(g,{width:"trigger","negative-text":null,onPositiveClick:z=>h(D.link)},{trigger:t(()=>[i("div",go,[e(b,{text:"",tag:"a",type:"primary"},{default:t(()=>[x("專案連結")]),_:1})])]),default:t(()=>[x(" 即將前往: "+k(D.link),1),vo,x(" 此網站由"+k(D.name)+"提供，請留意網路安全 ",1)]),_:2},1032,["onPositiveClick"]),e(C,{id:D.id},null,8,["id"])]),_:2},1024)]),_:2},1032,["title"]))),256))]),_:1})]),_:1},8,["title"])}}}),xo={class:"flex flex-col gap-1"},$o=i("span",null,"專案名稱",-1),bo={class:"flex flex-col gap-1"},jo=i("span",null,"專案敘述",-1),ko={class:"flex flex-col gap-1"},wo=i("span",null,"專案連結(ex: 投影片)",-1),Co={class:"flex flex-col gap-1"},Lo=i("span",null,"許願mentor類別",-1),Po={class:"flex flex-col gap-1"},Do=i("span",null,"許願mentor",-1),Io=I({__name:"EditProject",setup(u){const s=R(),l=N(),c=J(),a=V(),o=w(!1),_=S(()=>s.createdProjects.find(r=>r.id===a.query.id)),m=w(_==null?void 0:_.value.name),h=w(_==null?void 0:_.value.description),p=w(_==null?void 0:_.value.link),y=w(_==null?void 0:_.value.mentorType),$=w(_==null?void 0:_.value.mentorName),b=async()=>{o.value=!0;try{await s.editProject(m.value,h.value,p.value,a.query.id,y.value,$.value),l.success("成功編輯專案"),c.push({name:"My Projects"})}catch(r){l.error(r.message)}o.value=!1};return(r,f)=>{const g=ne,C=H,L=G;return d(),v(L,{vertical:""},{default:t(()=>[i("div",xo,[$o,e(g,{placeholder:"專案名稱",value:n(m),"onUpdate:value":f[0]||(f[0]=P=>F(m)?m.value=P:null),disabled:n(o)},null,8,["value","disabled"])]),i("div",bo,[jo,e(g,{disabled:n(o),placeholder:"專案敘述",value:n(h),"onUpdate:value":f[1]||(f[1]=P=>F(h)?h.value=P:null),type:"textarea",maxlength:"30","show-count":""},null,8,["disabled","value"])]),i("div",ko,[wo,e(g,{placeholder:"專案連結(ex: 投影片)",value:n(p),"onUpdate:value":f[2]||(f[2]=P=>F(p)?p.value=P:null),disabled:n(o)},null,8,["value","disabled"])]),i("div",Co,[Lo,e(g,{placeholder:"許願mentor類別(ex: UI/UX)",value:n(y),"onUpdate:value":f[3]||(f[3]=P=>F(y)?y.value=P:null),disabled:n(o)},null,8,["value","disabled"])]),i("div",Po,[Do,e(g,{placeholder:"許願mentor姓名",value:n($),"onUpdate:value":f[4]||(f[4]=P=>F($)?$.value=P:null),disabled:n(o)},null,8,["value","disabled"])]),e(L,{justify:"end"},{default:t(()=>[e(C,{onClick:b,loading:n(o)},{default:t(()=>[x("儲存專案")]),_:1},8,["loading"])]),_:1})]),_:1})}}}),Mo=I({__name:"GoogleLoginButton",emits:["handleGoogleLogin"],setup(u,{emit:s}){const l=R(),c=X(),a=N();J();const o=async _=>{try{l.appReady=!1,c.start(),await l.googleLogin(_.credential),c.finish(),s("handleGoogleLogin",re(_.credential))}catch(m){a.error(m),l.googleLogout()}};return(_,m)=>{const h=A("GoogleLogin");return d(),v(h,{callback:o})}}}),So={class:"h-full w-full flex justify-center items-center"},Ro=["src"],Uo=I({__name:"Login",setup(u){const s=J(),l=V(),c=S(()=>l.redirectedFrom),a=o=>{s.push(c.value?{name:c.value.name,query:c.value.query}:{name:"Home"})};return(o,_)=>{const m=Mo,h=he;return d(),j("div",So,[e(h,{title:"GDSC NCCU"},{icon:t(()=>[i("img",{src:n(ie),width:"150"},null,8,Ro)]),footer:t(()=>[e(m,{onHandleGoogleLogin:a})]),_:1})])}}}),Ho={};function Eo(u,s){const l=st,c=H,a=A("RouterLink"),o=we,_=Ce;return d(),v(_,{class:"px-2"},{default:t(()=>[e(o,null,{suffix:t(()=>[e(a,{to:{name:"Log"}},{default:t(()=>[e(c,null,{default:t(()=>[x("前往")]),_:1})]),_:1})]),default:t(()=>[e(l,{title:"Log","content-style":"margin-top: 10px;"})]),_:1}),e(o,null,{suffix:t(()=>[e(a,{to:{name:"AdminProjects"}},{default:t(()=>[e(c,null,{default:t(()=>[x("前往")]),_:1})]),_:1})]),default:t(()=>[e(l,{title:"Projects","content-style":"margin-top: 10px;"})]),_:1})]),_:1})}const Bo=O(Ho,[["render",Eo]]),Fo={name:"MdiCloseCircle"},Ao={width:"1em",height:"1em",viewBox:"0 0 24 24"},zo=i("path",{fill:"currentColor",d:"M12 2c5.53 0 10 4.47 10 10s-4.47 10-10 10S2 17.53 2 12S6.47 2 12 2m3.59 5L12 10.59L8.41 7L7 8.41L10.59 12L7 15.59L8.41 17L12 13.41L15.59 17L17 15.59L13.41 12L17 8.41L15.59 7Z"},null,-1),qo=[zo];function No(u,s,l,c,a,o){return d(),j("svg",Ao,qo)}const Oo=O(Fo,[["render",No]]),Vo={key:1,class:"grid grid-cols-2 sm:grid-cols-3"},Go={class:"grid grid-cols-2 gap-2"},To=i("h2",{class:"text-xl"},"加入的專案",-1),Yo=i("h2",{class:"text-xl"},"建立的專案",-1),Zo={class:"grid grid-cols-3"},Qo=i("h3",{class:"text-xl"},"上學期資料",-1),Jo={class:"flex gap-2"},Ko={key:0,class:"flex items-center text-green-600 text-xl"},Xo={key:1,class:"flex items-center text-red-500 text-xl"},Wo={class:"flex gap-2"},es={key:0,class:"flex items-center text-green-600 text-xl"},ts={key:1,class:"flex items-center text-red-500 text-xl"},ns={class:"flex gap-2"},os={key:0,class:"flex items-center text-green-600 text-xl"},ss={key:1,class:"flex items-center text-red-500 text-xl"},as={class:"flex flex-col gap-1"},cs=i("span",null,"金額",-1),ls=I({__name:"Payment",setup(u){const s=V(),l=N(),c=X(),a=R(),o=w(null),_=w(1),m=w(""),h=w(!1),p=S(()=>a.joinedProjects.length>0||a.createdProjects.length>0?{type:"社員",count:U.社員+(a.isLastSemester?-200:0)}:a.paid>=U.會員?{type:"會員",count:U.會員+(a.isLastSemester?-200:0)}:{type:"Insider",count:0});ee(async()=>{await y()});const y=async()=>{c.start();const b=s.query.id,r=await B("get",{params:{type:"checkPayment",uid:a.getId,id:b}});c.finish();const{data:f,success:g}=r.data;if(!g){l.error(f);return}o.value=f},$=async b=>{if(b.preventDefault(),m.value===""){l.error("請填入金額");return}h.value=!0;const r=await B("post",{data:{type:"payment",uid:a.getId,id:s.query.id,payment:(_.value*parseInt(m.value)).toString()}});h.value=!1;const{data:f,success:g}=r.data;if(!g){l.error(f);return}l.success("紀錄完成"),o.value=null,_.value=1,await y()};return(b,r)=>{const f=ae,g=de,C=te,L=De,P=me,D=K,z=G,Y=Le,Z=Oo,W=$e,oe=be,q=ne,se=H;return n(o)?(d(),v(z,{key:0,vertical:""},{default:t(()=>{var fe,ge,ve;return[((fe=n(o))==null?void 0:fe.user.name)===""||n(o).user.phone===""?(d(),v(f,{key:0,type:"info",title:"個人資料尚未完成"})):(d(),j("div",Vo,[e(g,{label:"姓名"},{default:t(()=>[x(k(n(o).user.name),1)]),_:1}),e(g,{label:"電話"},{default:t(()=>[x(k(n(o).user.phone),1)]),_:1}),n(o).user.inSchool?(d(),v(g,{key:0,label:"學號"},{default:t(()=>[x(k(n(o).user.studentId),1)]),_:1})):E("",!0),n(o).user.inSchool?(d(),v(g,{key:1,label:"系級"},{default:t(()=>[x(k(n(o).user.dept),1)]),_:1})):E("",!0),e(g,{label:"身分"},{default:t(()=>[x(k(n(o).user.inSchool?"政大學生":"政大校友/校外人士"),1)]),_:1})])),e(C),((ge=n(o))==null?void 0:ge.discord)===null?(d(),v(f,{key:2,type:"info",title:"Discord 尚未綁定"})):(d(),v(L,{key:3,readOnly:"",discordData:(ve=n(o))==null?void 0:ve.discord},null,8,["discordData"])),e(C),i("div",Go,[e(z,{vertical:""},{default:t(()=>[To,n(o).joinedProjects.length===0?(d(),v(D,{key:0},{default:t(()=>[e(P,{description:"尚無專案"})]),_:1})):E("",!0),(d(!0),j(M,null,T(n(o).joinedProjects,Q=>(d(),v(D,{title:Q.name},null,8,["title"]))),256))]),_:1}),e(z,{vertical:""},{default:t(()=>[Yo,n(o).createdProjects.length===0?(d(),v(D,{key:0},{default:t(()=>[e(P,{description:"尚無專案"})]),_:1})):E("",!0),(d(!0),j(M,null,T(n(o).createdProjects,Q=>(d(),v(D,{title:Q.name},null,8,["title"]))),256))]),_:1})]),e(C),i("div",Zo,[e(g,{label:"當前身分"},{default:t(()=>[x(k(n(p).type),1)]),_:1}),e(g,{label:"應繳金額"},{default:t(()=>[x(k(n(p).count),1)]),_:1}),e(g,{label:"已繳金額"},{default:t(()=>[x(k(n(o).paidCount),1)]),_:1})]),e(C),n(o).oldMember?(d(),v(z,{key:4,vertical:""},{default:t(()=>[Qo,i("div",Jo,[n(o).oldMember.name===n(o).user.name?(d(),j("span",Ko,[e(Y)])):(d(),j("span",Xo,[e(Z)])),i("span",null,"姓名: "+k(n(o).oldMember.name),1)]),i("div",Wo,[n(o).oldMember.email===n(o).user.email?(d(),j("span",es,[e(Y)])):(d(),j("span",ts,[e(Z)])),i("span",null,"email: "+k(n(o).oldMember.email||"無資料"),1)]),i("div",ns,[n(o).oldMember.studentId===n(o).user.studentId?(d(),j("span",os,[e(Y)])):(d(),j("span",ss,[e(Z)])),i("span",null,"學號: "+k(n(o).oldMember.studentId||"無資料"),1)])]),_:1})):(d(),v(f,{key:5,type:"info",title:"無上學期社員資訊"})),e(C),e(D,null,{default:t(()=>[i("form",{onSubmit:$},[e(z,{vertical:""},{default:t(()=>[e(oe,{value:n(_),"onUpdate:value":r[0]||(r[0]=Q=>F(_)?_.value=Q:null),name:"radiobuttongroup1",class:"w-full",disabled:n(h)},{default:t(()=>[e(W,{value:1,label:"收款",class:"w-[calc(50%_-_0.5px)] text-center"}),e(W,{value:-1,label:"退款",class:"w-[calc(50%_-_0.5px)] text-center"})]),_:1},8,["value","disabled"]),i("div",as,[cs,e(q,{placeholder:"金額",value:n(m),"onUpdate:value":r[1]||(r[1]=Q=>F(m)?m.value=Q:null),disabled:n(h)},null,8,["value","disabled"])]),e(z,{justify:"end"},{default:t(()=>[e(se,{"attr-type":"submit",loading:n(h)},{default:t(()=>[x("紀錄")]),_:1},8,["loading"])]),_:1})]),_:1})],32)]),_:1}),e(f,{type:"info",title:"上學期社費抵免請分開紀錄"})]}),_:1})):E("",!0)}}}),rs={key:0},is=I({__name:"Checkin",setup(u){const s=V(),l=N(),c=X(),a=R(),o=w(null),_=w(!1),m=w(!1),h=S(()=>o.value?(o.value.createdProjects.length>0||o.value.joinedProjects.length>0)&&(o.value.isCore||o.value.isFullYear||(o.value.isLastSemester?o.value.paidCount>=U.社員-200:o.value.paidCount>=U.社員))?"社員":o.value.createdProjects.length===0&&o.value.joinedProjects.length===0&&(o.value.isCore||(o.value.isLastSemester?o.value.paidCount>=U.會員-200:o.value.paidCount>=U.會員))?"會員":"insider":"");ee(async()=>{await p()});const p=async()=>{c.start();const $=s.query.id,b=await B("get",{params:{type:"checkPayment",uid:a.getId,id:$}});c.finish();const{data:r,success:f}=b.data;if(!f){l.error(r);return}o.value=r},y=async $=>{$.preventDefault(),_.value=!0;const b=await B("post",{data:{type:"checkin",uid:a.getId,id:s.query.id,checkinId:new Date().getFullYear().toString()+(new Date().getMonth()+1<10?"0":"")+(new Date().getMonth()+1).toString()+(new Date().getDate()+1<10?"0":"")+(new Date().getDate()+1).toString()}});_.value=!1;const{data:r,success:f}=b.data;if(!f){l.error(r);return}l.success("簽到完成"),m.value=!0};return($,b)=>{const r=ae,f=H,g=he;return n(o)?(d(),j("div",rs,[n(m)?(d(),v(g,{key:1,status:"success",title:"簽到成功",description:"你可以放心關掉這一頁了"})):(d(),v(g,{key:0,status:n(h)==="insider"&&n(o).checkinCount>0?"error":"success",title:n(h),description:"場次: "+n(o).checkinCount},{footer:t(()=>[n(h)==="insider"&&n(o).checkinCount>0?(d(),v(r,{key:0,title:"請先去繳費",type:"error"})):(d(),v(f,{key:1,size:"large",type:"primary",loading:n(_),onClick:y},{default:t(()=>[x("簽到")]),_:1},8,["loading"]))]),_:1},8,["status","title","description"]))])):E("",!0)}}}),_s=I({__name:"Log",setup(u){V();const s=N(),l=X(),c=w(!1),a=R(),o=w([]),_=w([]),m=[{title:"Id",key:"index"},{title:"時間",key:"time",render(r){return new Date(r.time).toLocaleString()},sorter:"default",ellipsis:!0},{title:"姓名",key:"userId",render(r){var f;return(f=_.value.find(g=>g.id==r.userId))==null?void 0:f.name}},{title:"Core",key:"coreId",render(r){var f;return(f=_.value.find(g=>g.id==r.coreId))==null?void 0:f.name},sorter:"default",ellipsis:!0},{title:"Count",key:"count"},{title:"Action",key:"actions",render(r){return r.check?"已付款":Be(H,{type:"primary",size:"small",onClick:()=>b(r.index)},{default:()=>"確認收款"})}}],h={pageSize:10},p=S(()=>({total:_.value.length,projectMember:_.value.filter(r=>(r.createdProjects.length>0||r.joinedProjects.length>0)&&(r.isCore||r.isFullYear||(r.isLastSemester?r.paidCount>=U.社員-200:r.paidCount>=U.社員))).filter(r=>!r.isCore),member:_.value.filter(r=>r.createdProjects.length===0&&r.joinedProjects.length===0&&(r.isCore||(r.isLastSemester?r.paidCount>=U.會員-200:r.paidCount>=U.會員))).filter(r=>!r.isCore),projectMemberMailList:_.value.filter(r=>(r.createdProjects.length!==0||r.joinedProjects.length!==0)&&!(r.isCore||r.isFullYear||(r.isLastSemester?r.paidCount>=U.社員-200:r.paidCount>=U.社員))),memberMailList:_.value.filter(r=>r.createdProjects.length===0&&r.joinedProjects.length===0&&!(r.isCore||(r.isLastSemester?r.paidCount>=U.會員-200:r.paidCount>=U.會員))&&r.name!=="")})),y=S(()=>{const r=new Object;return o.value.forEach(f=>{var C;const g=((C=_.value.find(L=>L.id===f.coreId))==null?void 0:C.name)||"未知";r.hasOwnProperty(g)||(r[g]={total:0,owe:0}),r[g].total+=f.count,f.check||(r[g].owe+=f.count)}),r}),$=async()=>{l.start(),c.value=!0;const r=await B("get",{params:{type:"log",uid:a.getId}});l.finish(),c.value=!1;const{data:f,success:g}=r.data;if(!g){s.error(f);return}o.value=f.log,_.value=f.user},b=async r=>{l.start(),c.value=!0;const f=await B("post",{data:{type:"checkLog",uid:a.getId,index:r}});l.finish();const{data:g,success:C}=f.data;if(!C){s.error(g),c.value=!1;return}$()};return ee(()=>{$()}),(r,f)=>{const g=de,C=at,L=ct,P=lt,D=rt,z=te,Y=we,Z=Ce,W=it,oe=le;return d(),v(oe,{show:n(c)},{default:t(()=>[e(W,{type:"line",animated:""},{default:t(()=>[e(P,{name:"總覽",tab:"總覽"},{default:t(()=>[e(L,null,{default:t(()=>[e(C,{span:8},{default:t(()=>[e(g,{label:"總數",value:n(p).total},null,8,["value"])]),_:1}),e(C,{span:8},{default:t(()=>[e(g,{label:"社員",value:n(p).projectMember.length},null,8,["value"])]),_:1}),e(C,{span:8},{default:t(()=>[e(g,{label:"會員",value:n(p).member.length},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(P,{name:"社費紀錄",tab:"社費紀錄"},{default:t(()=>[e(D,{columns:m,data:n(o),pagination:h},null,8,["data"]),e(z),e(Z,{class:"p-2 rounded-md"},{default:t(()=>[(d(!0),j(M,null,T(Object.keys(n(y)),q=>(d(),v(Y,null,{suffix:t(()=>[i("span",null,k(n(y)[q].owe)+" / "+k(n(y)[q].total),1)]),default:t(()=>[x(k(q)+" ",1)]),_:2},1024))),256))]),_:1})]),_:1}),e(P,{name:"jay chou",tab:"Jay Chou"},{default:t(()=>[x(" Qilixiang ")]),_:1})]),_:1})]),_:1},8,["show"])}}});const ds={class:"flex flex-col gap-2"},us={class:"flex flex-wrap items-center gap-2"},ps=i("span",null,"Leader:",-1),ms=["href"],hs=i("br",null,null,-1),fs={class:"flex flex-wrap items-center gap-2"},gs=i("span",null,"Members:",-1),vs=["href"],ys=I({__name:"Projects",setup(u){V();const s=N(),l=X(),c=w(!1),a=R(),o=w([]),_=async()=>{l.start(),c.value=!0;const m=await B("get",{params:{type:"projectsByCore",uid:a.getId}});l.finish(),c.value=!1;const{data:h,success:p}=m.data;if(!p){s.error(h);return}o.value=h};return ee(()=>{_()}),(m,h)=>{const p=te,y=dt,$=_t,b=le;return d(),v(b,{show:n(c)},{default:t(()=>[e($,{"display-directive":"show"},{default:t(()=>[(d(!0),j(M,null,T(n(o),r=>(d(),v(y,{title:r.name,name:r.id},{"header-extra":t(()=>[x(k(r.leader.name),1)]),default:t(()=>[i("div",ds,[i("span",null,k(r.description),1),i("span",null,"Mentor: "+k(r.mentorType||"無")+" / "+k(r.mentorName||"無"),1)]),e(p),i("div",us,[ps,i("a",{href:`/payment?id=${r.leader.id}`,target:"_blanks"},[e(n(H),{type:"info"},{default:t(()=>[x(k(r.leader.name),1)]),_:2},1024)],8,ms)]),hs,i("div",fs,[gs,(d(!0),j(M,null,T(r.members,f=>(d(),j("a",{href:`/payment?id=${f.id}`,target:"_blanks"},[e(n(H),{type:"primary"},{default:t(()=>[x(k(f.name),1)]),_:2},1024)],8,vs))),256))])]),_:2},1032,["title","name"]))),256))]),_:1})]),_:1},8,["show"])}}}),xs={};function $s(u,s){const l=H,c=A("RouterLink"),a=he,o=G;return d(),v(o,{class:"h-full",align:"center",justify:"center"},{default:t(()=>[e(a,{status:"404",title:"404 Not Found",description:"You know life is always ridiculous."},{footer:t(()=>[e(c,{to:"/"},{default:t(()=>[e(l,null,{default:t(()=>[x("Back Home")]),_:1})]),_:1})]),_:1})]),_:1})}const bs=O(xs,[["render",$s]]),js=I({__name:"Discord",setup(u){const s=V(),l=J(),c=R(),a=X(),o=N(),_=S(()=>s.query.code);return ee(async()=>{try{a.start(),await c.discordLogin(_.value),a.finish(),o.success("綁定成功"),l.push({name:"Link Discord"})}catch(m){a.finish(),o.error(m.message),l.push({name:"Link Discord"})}}),(m,h)=>"正在綁定你的discord，請不要離開此頁"}}),ks=[{path:"/",name:"Home",component:yn,meta:{breadCrumb:[{text:"Home"}]}},{path:"/link-discord",name:"Link Discord",component:Pn,meta:{breadCrumb:[{text:"Home",to:{name:"Home"}},{text:"Link Discord"}]}},{path:"/user",name:"User",component:Bn,meta:{breadCrumb:[{text:"Home",to:{name:"Home"}},{text:"User"}]}},{path:"/projects",children:[{path:"",name:"My Projects",component:ao,meta:{breadCrumb:[{text:"Home",to:{name:"Home"}},{text:"My Projects"}]}},{path:"create",name:"Create Project",component:po,meta:{breadCrumb:[{text:"Home",to:{name:"Home"}},{text:"My Projects",to:{name:"My Projects"}},{text:"Create Project"}]}},{path:"enter",name:"Enter Project",component:yo,meta:{breadCrumb:[{text:"Home",to:{name:"Home"}},{text:"My Projects",to:{name:"My Projects"}},{text:"Enter Project"}]}},{path:"edit",name:"Edit Project",component:Io,meta:{breadCrumb:[{text:"Home",to:{name:"Home"}},{text:"My Projects",to:{name:"My Projects"}},{text:"Edit Project"}]}}]},{path:"/admin",children:[{path:"",name:"Admin",component:Bo,meta:{breadCrumb:[{text:"Admin"}]}},{path:"log",name:"Log",component:_s,meta:{breadCrumb:[{text:"Admin",to:{name:"Admin"}},{text:"Log"}]}},{path:"projects",name:"AdminProjects",component:ys,meta:{breadCrumb:[{text:"Admin",to:{name:"Admin"}},{text:"Projects"}]}}]},{path:"/login",name:"Login",component:Uo},{path:"/payment",name:"Payment",component:ls},{path:"/checkin",name:"Checkin",component:is},{path:"/auth/callback",children:[{path:"discord",component:js}]},{path:"/:pathMatch(.*)*",name:"NotFound",component:bs}],Ie=Fe({history:Ae(),routes:ks});Ie.beforeEach(u=>{const s=R();if(!s.credential&&u.name!=="Login")return{name:"Login"};if(s.credential&&u.name==="Login")return{name:"Home"}});const ws=ze(),ce=qe(yt);ce.use(Ne,{clientId:"1074271718336-6bd2eece404794eqmtpptar29v2u7kg9.apps.googleusercontent.com"});ce.use(Ie);ce.use(ws);ce.component(ye.name,ye);ce.mount("#app");
